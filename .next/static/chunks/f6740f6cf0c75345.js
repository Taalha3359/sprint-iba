(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64659,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>t],64659)},18566,(e,t,r)=>{t.exports=e.r(76562)},19455,91918,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(20783),s=Symbol.for("react.lazy"),l=r[" use ".trim().toString()];function i(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===s&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function n(e){var s;let n,o=(s=e,(n=r.forwardRef((e,t)=>{let{children:s,...n}=e;if(i(s)&&"function"==typeof l&&(s=l(s._payload)),r.isValidElement(s)){var o;let e,l,i=(o=s,(l=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(l=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),d=function(e,t){let r={...t};for(let a in t){let s=e[a],l=t[a];/^on[A-Z]/.test(a)?s&&l?r[a]=(...e)=>{let t=l(...e);return s(...e),t}:s&&(r[a]=s):"style"===a?r[a]={...s,...l}:"className"===a&&(r[a]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}(n,s.props);return s.type!==r.Fragment&&(d.ref=t?(0,a.composeRefs)(t,i):i),r.cloneElement(s,d)}return r.Children.count(s)>1?r.Children.only(null):null})).displayName=`${s}.SlotClone`,n),d=r.forwardRef((e,a)=>{let{children:s,...n}=e;i(s)&&"function"==typeof l&&(s=l(s._payload));let d=r.Children.toArray(s),u=d.find(c);if(u){let e=u.props.children,s=d.map(t=>t!==u?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(o,{...n,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,s):null})}return(0,t.jsx)(o,{...n,ref:a,children:s})});return d.displayName=`${e}.Slot`,d}var o=n("Slot"),d=Symbol("radix.slottable");function c(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===d}e.s(["Slot",()=>o,"createSlot",()=>n],91918);var u=e.i(25913),f=e.i(75157);let x=(0,u.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=r.forwardRef(({className:e,variant:r,size:a,asChild:s=!1,...l},i)=>(0,t.jsx)(s?o:"button",{className:(0,f.cn)(x({variant:r,size:a,className:e})),ref:i,...l}));m.displayName="Button",e.s(["Button",()=>m,"buttonVariants",()=>x],19455)},15288,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(75157);let s=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));s.displayName="Card";let l=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));l.displayName="CardHeader";let i=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("h3",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));i.displayName="CardTitle";let n=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",e),...r}));n.displayName="CardDescription";let o=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...r}));o.displayName="CardContent";let d=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r}));d.displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>o,"CardDescription",()=>n,"CardFooter",()=>d,"CardHeader",()=>l,"CardTitle",()=>i])},86318,e=>{"use strict";var t=e.i(71645);e.i(43476);var r=t.createContext(void 0);function a(e){let a=t.useContext(r);return e||a||"ltr"}e.s(["useDirection",()=>a])},87486,e=>{"use strict";var t=e.i(43476),r=e.i(25913),a=e.i(75157);let s=(0,r.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:r,...l}){return(0,t.jsx)("div",{className:(0,a.cn)(s({variant:r}),e),...l})}e.s(["Badge",()=>l])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},78917,e=>{"use strict";let t=(0,e.i(75254).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],78917)},48085,e=>{"use strict";var t=e.i(43476),r=e.i(57951),a=e.i(71645),s=e.i(41867),l=e.i(31278),i=e.i(18566);e.s(["OperatorRoute",0,({children:e})=>{let{user:n,loading:o}=(0,r.useAuth)(),[d,c]=(0,a.useState)(null),[u,f]=(0,a.useState)(!0),x=(0,i.useRouter)();return((0,a.useEffect)(()=>{let e=async()=>{if(!n)return void f(!1);try{let{data:e,error:t}=await s.supabase.from("profiles").select("role").eq("id",n.id).single();t?(console.error("Error checking role:",t),c(!1)):c(e?.role==="operator")}catch(e){console.error("Exception checking role:",e),c(!1)}finally{f(!1)}};o||e()},[n,o]),(0,a.useEffect)(()=>{o||n||x.push("/operator/login")},[n,o,u,d,x]),o||u)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(l.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):n?d?(0,t.jsx)(t.Fragment,{children:e}):(0,t.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center space-y-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-red-500",children:"Access Denied"}),(0,t.jsx)("p",{children:"You do not have operator privileges."}),(0,t.jsx)("button",{onClick:()=>x.push("/"),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Go Home"})]}):null}])},84774,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(75157);let s=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,a.cn)("w-full caption-bottom text-sm",e),...r})}));s.displayName="Table";let l=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("thead",{ref:s,className:(0,a.cn)("[&_tr]:border-b",e),...r}));l.displayName="TableHeader";let i=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("tbody",{ref:s,className:(0,a.cn)("[&_tr:last-child]:border-0",e),...r}));i.displayName="TableBody",r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("tfoot",{ref:s,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let n=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("tr",{ref:s,className:(0,a.cn)("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...r}));n.displayName="TableRow";let o=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("th",{ref:s,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));o.displayName="TableHead";let d=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("td",{ref:s,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));d.displayName="TableCell",r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("caption",{ref:s,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption",e.s(["Table",()=>s,"TableBody",()=>i,"TableCell",()=>d,"TableHead",()=>o,"TableHeader",()=>l,"TableRow",()=>n])},36063,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(19455),l=e.i(15288),i=e.i(84774),n=e.i(67489),o=e.i(87486),d=e.i(71689),c=e.i(78917),u=e.i(31278);let f=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var x=e.i(73884),m=e.i(3116),p=e.i(41867),h=e.i(46696),g=e.i(48085);let b=()=>{let e=(0,a.useRouter)(),[g,b]=(0,r.useState)([]),[y,v]=(0,r.useState)(!0),[j,N]=(0,r.useState)("pending");(0,r.useEffect)(()=>{w()},[j]);let w=async()=>{v(!0);try{let e=p.supabase.from("question_reports").select(`
                    *,
                    questions (
                        question_text,
                        topic,
                        subtopic
                    )
                `).order("created_at",{ascending:!1});"all"!==j&&(e=e.eq("status",j));let{data:t,error:r}=await e;if(r)throw r;b(t||[])}catch(e){console.error("Error fetching reports:",e),h.toast.error("Failed to load reports")}finally{v(!1)}},C=async(e,t)=>{try{let{error:r}=await p.supabase.from("question_reports").update({status:t}).eq("id",e);if(r)throw r;h.toast.success(`Report marked as ${t}`),w()}catch(e){console.error("Error updating status:",e),h.toast.error("Failed to update status")}};return(0,t.jsx)("div",{className:"min-h-screen bg-background p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",onClick:()=>e.push("/operator/dashboard"),children:(0,t.jsx)(d.ArrowLeft,{className:"w-6 h-6"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Reported Questions"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(n.Select,{value:j,onValueChange:N,children:[(0,t.jsx)(n.SelectTrigger,{className:"w-[180px]",children:(0,t.jsx)(n.SelectValue,{placeholder:"Filter by Status"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"pending",children:"Pending"}),(0,t.jsx)(n.SelectItem,{value:"resolved",children:"Resolved"}),(0,t.jsx)(n.SelectItem,{value:"dismissed",children:"Dismissed"}),(0,t.jsx)(n.SelectItem,{value:"all",children:"All Reports"})]})]}),(0,t.jsx)(s.Button,{onClick:w,variant:"outline",size:"icon",children:(0,t.jsx)(u.Loader2,{className:`w-4 h-4 ${y?"animate-spin":""}`})})]})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsx)(l.CardTitle,{children:"Reports List"})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsxs)(i.Table,{children:[(0,t.jsx)(i.TableHeader,{children:(0,t.jsxs)(i.TableRow,{children:[(0,t.jsx)(i.TableHead,{children:"Date"}),(0,t.jsx)(i.TableHead,{children:"Reason"}),(0,t.jsx)(i.TableHead,{className:"w-[300px]",children:"Details"}),(0,t.jsx)(i.TableHead,{children:"Question"}),(0,t.jsx)(i.TableHead,{children:"Status"}),(0,t.jsx)(i.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(i.TableBody,{children:y?(0,t.jsx)(i.TableRow,{children:(0,t.jsx)(i.TableCell,{colSpan:6,className:"text-center py-8",children:(0,t.jsx)(u.Loader2,{className:"w-8 h-8 animate-spin mx-auto text-primary"})})}):0===g.length?(0,t.jsx)(i.TableRow,{children:(0,t.jsx)(i.TableCell,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No reports found."})}):g.map(r=>(0,t.jsxs)(i.TableRow,{children:[(0,t.jsx)(i.TableCell,{className:"whitespace-nowrap",children:new Date(r.created_at).toLocaleDateString()}),(0,t.jsx)(i.TableCell,{className:"font-medium capitalize",children:r.report_reason.replace("_"," ")}),(0,t.jsx)(i.TableCell,{className:"text-sm text-muted-foreground",children:r.additional_details||"No details provided"}),(0,t.jsx)(i.TableCell,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("span",{className:"text-xs font-medium text-muted-foreground",children:[r.questions?.topic," / ",r.questions?.subtopic]}),(0,t.jsx)("span",{className:"text-sm truncate max-w-[200px]",children:r.questions?.question_text})]})}),(0,t.jsx)(i.TableCell,{children:(e=>{switch(e){case"pending":return(0,t.jsxs)(o.Badge,{variant:"outline",className:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",children:[(0,t.jsx)(m.Clock,{className:"w-3 h-3 mr-1"})," Pending"]});case"resolved":return(0,t.jsxs)(o.Badge,{variant:"outline",className:"bg-green-500/10 text-green-500 border-green-500/20",children:[(0,t.jsx)(f,{className:"w-3 h-3 mr-1"})," Resolved"]});case"dismissed":return(0,t.jsxs)(o.Badge,{variant:"outline",className:"bg-gray-500/10 text-gray-500 border-gray-500/20",children:[(0,t.jsx)(x.XCircle,{className:"w-3 h-3 mr-1"})," Dismissed"]});default:return(0,t.jsx)(o.Badge,{variant:"outline",children:e})}})(r.status)}),(0,t.jsx)(i.TableCell,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:()=>e.push(`/operator/editor/${r.question_id}`),title:"Edit Question",children:(0,t.jsx)(c.ExternalLink,{className:"w-4 h-4"})}),"pending"===r.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",className:"text-green-500 hover:text-green-600 hover:bg-green-50",onClick:()=>C(r.id,"resolved"),title:"Mark Resolved",children:(0,t.jsx)(f,{className:"w-4 h-4"})}),(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-600 hover:bg-gray-50",onClick:()=>C(r.id,"dismissed"),title:"Dismiss",children:(0,t.jsx)(x.XCircle,{className:"w-4 h-4"})})]})]})})]},r.id))})]})})]})]})})};e.s(["default",0,()=>(0,t.jsx)(g.OperatorRoute,{children:(0,t.jsx)(b,{})})],36063)}]);