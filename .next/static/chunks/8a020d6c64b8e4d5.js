(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19455,91918,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(20783),l=Symbol.for("react.lazy"),o=r[" use ".trim().toString()];function a(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===l&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function n(e){var l;let n,i=(l=e,(n=r.forwardRef((e,t)=>{let{children:l,...n}=e;if(a(l)&&"function"==typeof o&&(l=o(l._payload)),r.isValidElement(l)){var i;let e,o,a=(i=l,(o=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(o=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),d=function(e,t){let r={...t};for(let s in t){let l=e[s],o=t[s];/^on[A-Z]/.test(s)?l&&o?r[s]=(...e)=>{let t=o(...e);return l(...e),t}:l&&(r[s]=l):"style"===s?r[s]={...l,...o}:"className"===s&&(r[s]=[l,o].filter(Boolean).join(" "))}return{...e,...r}}(n,l.props);return l.type!==r.Fragment&&(d.ref=t?(0,s.composeRefs)(t,a):a),r.cloneElement(l,d)}return r.Children.count(l)>1?r.Children.only(null):null})).displayName=`${l}.SlotClone`,n),d=r.forwardRef((e,s)=>{let{children:l,...n}=e;a(l)&&"function"==typeof o&&(l=o(l._payload));let d=r.Children.toArray(l),u=d.find(c);if(u){let e=u.props.children,l=d.map(t=>t!==u?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(i,{...n,ref:s,children:r.isValidElement(e)?r.cloneElement(e,void 0,l):null})}return(0,t.jsx)(i,{...n,ref:s,children:l})});return d.displayName=`${e}.Slot`,d}var i=n("Slot"),d=Symbol("radix.slottable");function c(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===d}e.s(["Slot",()=>i,"createSlot",()=>n],91918);var u=e.i(25913),m=e.i(75157);let h=(0,u.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=r.forwardRef(({className:e,variant:r,size:s,asChild:l=!1,...o},a)=>(0,t.jsx)(l?i:"button",{className:(0,m.cn)(h({variant:r,size:s,className:e})),ref:a,...o}));x.displayName="Button",e.s(["Button",()=>x,"buttonVariants",()=>h],19455)},15288,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(75157);let l=r.forwardRef(({className:e,...r},l)=>(0,t.jsx)("div",{ref:l,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));l.displayName="Card";let o=r.forwardRef(({className:e,...r},l)=>(0,t.jsx)("div",{ref:l,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...r}));o.displayName="CardHeader";let a=r.forwardRef(({className:e,...r},l)=>(0,t.jsx)("h3",{ref:l,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));a.displayName="CardTitle";let n=r.forwardRef(({className:e,...r},l)=>(0,t.jsx)("p",{ref:l,className:(0,s.cn)("text-sm text-muted-foreground",e),...r}));n.displayName="CardDescription";let i=r.forwardRef(({className:e,...r},l)=>(0,t.jsx)("div",{ref:l,className:(0,s.cn)("p-6 pt-0",e),...r}));i.displayName="CardContent";let d=r.forwardRef(({className:e,...r},l)=>(0,t.jsx)("div",{ref:l,className:(0,s.cn)("flex items-center p-6 pt-0",e),...r}));d.displayName="CardFooter",e.s(["Card",()=>l,"CardContent",()=>i,"CardDescription",()=>n,"CardFooter",()=>d,"CardHeader",()=>o,"CardTitle",()=>a])},95468,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],95468)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},45481,e=>{"use strict";var t=e.i(43476),r=e.i(71645);class s{triggers=[];intervalId=null;checkIntervalMs=500;emulator=null;constructor(e=500){this.checkIntervalMs=e}setEmulator(e){this.emulator=e}addTrigger(e){this.triggers.push(e)}removeTrigger(e){this.triggers=this.triggers.filter(t=>t.address!==e)}startWatching(){this.intervalId?console.warn("Memory watcher already running"):this.emulator?(console.log("Starting GBA memory watcher..."),this.intervalId=setInterval(()=>{this.checkMemory()},this.checkIntervalMs)):console.error("No emulator instance set. Call setEmulator() first.")}stopWatching(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null,console.log("Memory watcher stopped"))}checkMemory(){if(this.emulator)try{let e=this.emulator.Module;if(!e||!e.HEAPU8)return;this.triggers.forEach(t=>{let r=e.HEAPU8[t.address];r===t.expectedValue&&(console.log(`Memory trigger detected at 0x${t.address.toString(16).toUpperCase()}: ${r}`),t.callback(r),this.resetTrigger(t.address))})}catch(e){console.error("Error reading emulator memory:",e)}}resetTrigger(e){try{this.emulator&&this.emulator.Module&&this.emulator.Module.HEAPU8&&(this.emulator.Module.HEAPU8[e]=0)}catch(e){console.error("Error resetting trigger:",e)}}writeMemory(e,t){try{this.emulator&&this.emulator.Module&&this.emulator.Module.HEAPU8&&(this.emulator.Module.HEAPU8[e]=t,console.log(`Wrote ${t} to 0x${e.toString(16).toUpperCase()}`))}catch(e){console.error("Error writing to memory:",e)}}destroy(){this.stopWatching(),this.triggers=[],this.emulator=null}}var l=e.i(19455),o=e.i(15288),a=e.i(63209),n=e.i(95468),i=e.i(37727);let d=({question:e,isVisible:s,onAnswer:d,onClose:c})=>{let[u,m]=(0,r.useState)(null),[h,x]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1);if(!s||!e)return null;let p=[{key:"A",text:e.option_a},{key:"B",text:e.option_b},{key:"C",text:e.option_c},{key:"D",text:e.option_d}];return(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80 backdrop-blur-sm z-50 p-4",children:(0,t.jsxs)(o.Card,{className:"w-full max-w-2xl shadow-2xl",children:[(0,t.jsx)(o.CardHeader,{className:"relative",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.CardTitle,{className:"text-2xl",children:"Numbers Town Challenge"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[e.subject," - ",e.unit]})]}),(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:c,className:"absolute top-4 right-4",disabled:h,children:(0,t.jsx)(i.X,{className:"h-4 w-4"})})]})}),(0,t.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,t.jsx)("div",{className:"bg-slate-100 dark:bg-slate-800 p-4 rounded-lg",children:(0,t.jsx)("p",{className:"text-lg font-medium",children:e.question_text})}),(0,t.jsx)("div",{className:"space-y-2",children:p.map(r=>(0,t.jsx)("button",{onClick:()=>!h&&m(r.key),disabled:h,className:`w-full text-left p-4 rounded-lg border-2 transition-all ${u===r.key?"border-blue-500 bg-blue-50 dark:bg-blue-950":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"} ${h?"cursor-not-allowed opacity-60":"cursor-pointer"}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`flex items-center justify-center w-8 h-8 rounded-full font-bold ${u===r.key?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:r.key}),(0,t.jsx)("span",{className:"flex-1",children:r.text}),h&&r.key===e.correct_option&&(0,t.jsx)(n.CheckCircle2,{className:"h-5 w-5 text-green-500"}),h&&u===r.key&&r.key!==e.correct_option&&(0,t.jsx)(i.X,{className:"h-5 w-5 text-red-500"})]})},r.key))}),h&&(0,t.jsx)("div",{className:`p-4 rounded-lg flex items-center gap-3 ${g?"bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800"}`,children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.CheckCircle2,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-green-900 dark:text-green-100",children:"Correct! Well done! ðŸŽ‰"}),(0,t.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300",children:"The battle will begin shortly..."})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.AlertCircle,{className:"h-6 w-6 text-red-600 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-red-900 dark:text-red-100",children:"Not quite right!"}),(0,t.jsxs)("p",{className:"text-sm text-red-700 dark:text-red-300",children:["The correct answer was: ",e.correct_option]})]})]})})]}),!h&&(0,t.jsx)(o.CardFooter,{children:(0,t.jsx)(l.Button,{onClick:()=>{if(!u)return;let t=u===e.correct_option;f(t),x(!0),setTimeout(()=>{d(u,t),m(null),x(!1)},2e3)},disabled:!u,className:"w-full",size:"lg",children:"Submit Answer"})})]})})};var c=e.i(41867);let u=async(e="Math")=>{try{let{data:t,error:r}=await c.supabase.from("questions").select("id, question_text, options, correct_answer, subject, unit_id").eq("subject",e).limit(50);if(r)return console.error("Error fetching emulator question:",r),null;if(!t||0===t.length)return console.warn(`No questions found for subject: ${e}`),null;let s=Math.floor(Math.random()*t.length),l=t[s],o=l.options||[];if(o.length<4)return console.error("Question has less than 4 options:",l),null;let a=["A","B","C","D"][parseInt(l.correct_answer||"0",10)];return{id:l.id,question_text:l.question_text,option_a:o[0]||"",option_b:o[1]||"",option_c:o[2]||"",option_d:o[3]||"",correct_option:a,subject:l.subject||"Math",unit:l.unit_id||"Unknown"}}catch(e){return console.error("Exception fetching emulator question:",e),null}};e.s(["default",0,()=>{let e=(0,r.useRef)(null),l=(0,r.useRef)(!1),o=(0,r.useRef)(null),[a,n]=(0,r.useState)(null),[i,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(window.EJS_player="#game-container",window.EJS_core="gba",window.EJS_gameUrl="games/Pokemon - FireRed Version (USA, Europe) (Rev 1).gba",window.EJS_pathtodata="https://cdn.emulatorjs.org/stable/data/",window.EJS_startOnLoaded=!0,!l.current){let e=document.createElement("script");return e.src="https://cdn.emulatorjs.org/stable/data/loader.js",e.async=!0,e.onload=()=>{console.log("EmulatorJS loaded successfully from CDN"),m()},e.onerror=()=>{console.error("Failed to load EmulatorJS from CDN")},document.body.appendChild(e),l.current=!0,()=>{e.parentNode&&document.body.removeChild(e),o.current&&o.current.destroy()}}},[]);let m=()=>{let e=setInterval(()=>{if(window.EJS_emulator){clearInterval(e),console.log("Emulator ready, initializing memory watcher...");let t=new s(500);t.setEmulator(window.EJS_emulator),t.addTrigger({address:0x20370b0,expectedValue:1,callback:h}),t.startWatching(),o.current=t,console.log("Memory watcher initialized and started")}},1e3);setTimeout(()=>{clearInterval(e),window.EJS_emulator||console.warn("Emulator did not load within 30 seconds")},3e4)},h=async e=>{console.log("Question trigger detected!"),window.EJS_emulator&&(window.EJS_emulator.pause(),console.log("Emulator paused"));let t="Math";if(window.EJS_emulator&&window.EJS_emulator.Module&&window.EJS_emulator.Module.HEAPU8)try{let e=window.EJS_emulator.Module.HEAPU8[0x20370b4];t=(e=>{switch(e){case 1:default:return"Math";case 2:return"Analytical";case 3:return"English"}})(e),console.log(`Question type from memory: ${e} => ${t}`)}catch(e){console.error("Error reading question type from memory:",e)}let r=await u(t);r?(n(r),c(!0)):(console.error("Failed to fetch question, resuming game"),window.EJS_emulator&&window.EJS_emulator.resume())};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-white mb-4",children:"Numbers Town - GBA Edition"}),(0,t.jsx)("p",{className:"text-gray-300 mb-2",children:"Pokemon FireRed with integrated math challenges from Supabase"}),(0,t.jsxs)("div",{className:"text-sm text-blue-400 bg-blue-900/20 border border-blue-600 rounded p-3 max-w-2xl mx-auto",children:[(0,t.jsx)("strong",{children:"ðŸ’¡ Interactive Learning:"})," NPCs will trigger math questions that pause the game!"]})]}),(0,t.jsxs)("div",{className:"relative bg-black rounded-lg shadow-2xl overflow-hidden mb-8",children:[(0,t.jsx)("div",{id:"game-container",ref:e,className:"w-full aspect-[3/2] min-h-[400px]"}),(0,t.jsx)(d,{question:a,isVisible:i,onAnswer:(e,t)=>{console.log(`Answer submitted: ${e}, Correct: ${t}`),o.current&&o.current.writeMemory(0x20370b2,+!!t),c(!1),n(null),window.EJS_emulator&&(window.EJS_emulator.resume(),console.log("Emulator resumed"))},onClose:()=>{o.current&&o.current.writeMemory(0x20370b2,0),c(!1),n(null),window.EJS_emulator&&window.EJS_emulator.resume()}})]}),(0,t.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 text-white",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"How It Works"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"ðŸŽ® Playing the Game"}),(0,t.jsx)("p",{className:"text-gray-300",children:"Play Pokemon FireRed normally using keyboard controls (Arrow keys, Z/X for A/B)."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"ðŸ“š Numbers Town NPCs"}),(0,t.jsx)("p",{className:"text-gray-300 mb-2",children:"When you interact with certain NPCs in the region, they will trigger a math question:"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside text-gray-400 ml-4 space-y-1",children:[(0,t.jsx)("li",{children:"The game automatically pauses"}),(0,t.jsx)("li",{children:"A question overlay appears from your Supabase database"}),(0,t.jsx)("li",{children:"Answer correctly to continue the battle"}),(0,t.jsx)("li",{children:"Wrong answers send you back to try again"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"ðŸ”§ ROM Hacking Setup"}),(0,t.jsx)("p",{className:"text-gray-300 mb-2",children:"To enable this feature, you need to modify the ROM using XSE (eXtreme Script Editor):"}),(0,t.jsx)("div",{className:"bg-slate-900 p-4 rounded mt-2 font-mono text-sm text-gray-400 overflow-x-auto",children:(0,t.jsx)("pre",{children:`writebytetooffset 0x0203FFFF 0x01
waitstate
compare LASTRESULT 0x1
if 0x1 goto @battle`})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"âœ¨ Features"}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-gray-300 space-y-1",children:[(0,t.jsx)("li",{children:"Real-time memory watching (0x0203FFFF)"}),(0,t.jsx)("li",{children:"Automatic game pause/resume"}),(0,t.jsx)("li",{children:"Questions fetched from your Supabase database"}),(0,t.jsx)("li",{children:"Support for Math, Analytical, and English questions"}),(0,t.jsx)("li",{children:"Clean UI overlay with instant feedback"})]})]})]})]})]})})}],45481)}]);