(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,e=>{"use strict";var t=e.i(43476),r=e.i(71645),l=e.i(75157);let a=r.forwardRef(({className:e,type:r,...a},n)=>(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...a}));a.displayName="Input",e.s(["Input",()=>a])},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],55436)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},5899,e=>{"use strict";let t=(0,e.i(75254).default)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);e.s(["Flag",()=>t],5899)},48085,e=>{"use strict";var t=e.i(43476),r=e.i(57951),l=e.i(71645),a=e.i(41867),n=e.i(31278),o=e.i(18566);e.s(["OperatorRoute",0,({children:e})=>{let{user:s,loading:i}=(0,r.useAuth)(),[c,d]=(0,l.useState)(null),[u,f]=(0,l.useState)(!0),p=(0,o.useRouter)();return((0,l.useEffect)(()=>{let e=async()=>{if(!s)return void f(!1);try{let{data:e,error:t}=await a.supabase.from("profiles").select("role").eq("id",s.id).single();t?(console.error("Error checking role:",t),d(!1)):d(e?.role==="operator")}catch(e){console.error("Exception checking role:",e),d(!1)}finally{f(!1)}};i||e()},[s,i]),(0,l.useEffect)(()=>{i||s||p.push("/operator/login")},[s,i,u,c,p]),i||u)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(n.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):s?c?(0,t.jsx)(t.Fragment,{children:e}):(0,t.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center space-y-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-red-500",children:"Access Denied"}),(0,t.jsx)("p",{children:"You do not have operator privileges."}),(0,t.jsx)("button",{onClick:()=>p.push("/"),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Go Home"})]}):null}])},84774,e=>{"use strict";var t=e.i(43476),r=e.i(71645),l=e.i(75157);let a=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,l.cn)("w-full caption-bottom text-sm",e),...r})}));a.displayName="Table";let n=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("thead",{ref:a,className:(0,l.cn)("[&_tr]:border-b",e),...r}));n.displayName="TableHeader";let o=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("tbody",{ref:a,className:(0,l.cn)("[&_tr:last-child]:border-0",e),...r}));o.displayName="TableBody",r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("tfoot",{ref:a,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let s=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("tr",{ref:a,className:(0,l.cn)("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...r}));s.displayName="TableRow";let i=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("th",{ref:a,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));i.displayName="TableHead";let c=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("td",{ref:a,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));c.displayName="TableCell",r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("caption",{ref:a,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption",e.s(["Table",()=>a,"TableBody",()=>o,"TableCell",()=>c,"TableHead",()=>i,"TableHeader",()=>n,"TableRow",()=>s])},37822,e=>{"use strict";let t,r,l;var a=e.i(43476),n=e.i(71645),o=e.i(81140),s=e.i(20783),i=e.i(30030),c=e.i(26330),d=e.i(3536),u=e.i(65491),f=e.i(10772),p=e.i(53660),m=e.i(74606),h=e.i(96626),v=e.i(48425),x=Symbol("radix.slottable");function g(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===x}var b=e.i(69340),y=e.i(86312),w=e.i(85369),j="Popover",[C,N]=(0,i.createContextScope)(j,[p.createPopperScope]),k=(0,p.createPopperScope)(),[R,E]=C(j),S=e=>{let{__scopePopover:t,children:r,open:l,defaultOpen:o,onOpenChange:s,modal:i=!1}=e,c=k(t),d=n.useRef(null),[u,m]=n.useState(!1),[h,v]=(0,b.useControllableState)({prop:l,defaultProp:o??!1,onChange:s,caller:j});return(0,a.jsx)(p.Root,{...c,children:(0,a.jsx)(R,{scope:t,contentId:(0,f.useId)(),triggerRef:d,open:h,onOpenChange:v,onOpenToggle:n.useCallback(()=>v(e=>!e),[v]),hasCustomAnchor:u,onCustomAnchorAdd:n.useCallback(()=>m(!0),[]),onCustomAnchorRemove:n.useCallback(()=>m(!1),[]),modal:i,children:r})})};S.displayName=j;var P="PopoverAnchor";n.forwardRef((e,t)=>{let{__scopePopover:r,...l}=e,o=E(P,r),s=k(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:c}=o;return n.useEffect(()=>(i(),()=>c()),[i,c]),(0,a.jsx)(p.Anchor,{...s,...l,ref:t})}).displayName=P;var A="PopoverTrigger",I=n.forwardRef((e,t)=>{let{__scopePopover:r,...l}=e,n=E(A,r),i=k(r),c=(0,s.useComposedRefs)(t,n.triggerRef),d=(0,a.jsx)(v.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":$(n.open),...l,ref:c,onClick:(0,o.composeEventHandlers)(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?d:(0,a.jsx)(p.Anchor,{asChild:!0,...i,children:d})});I.displayName=A;var T="PopoverPortal",[F,M]=C(T,{forceMount:void 0}),O=e=>{let{__scopePopover:t,forceMount:r,children:l,container:n}=e,o=E(T,t);return(0,a.jsx)(F,{scope:t,forceMount:r,children:(0,a.jsx)(h.Presence,{present:r||o.open,children:(0,a.jsx)(m.Portal,{asChild:!0,container:n,children:l})})})};O.displayName=T;var D="PopoverContent",q=n.forwardRef((e,t)=>{let r=M(D,e.__scopePopover),{forceMount:l=r.forceMount,...n}=e,o=E(D,e.__scopePopover);return(0,a.jsx)(h.Presence,{present:l||o.open,children:o.modal?(0,a.jsx)(H,{...n,ref:t}):(0,a.jsx)(B,{...n,ref:t})})});q.displayName=D;var _=((l=n.forwardRef((e,t)=>{let{children:r,...l}=e;if(n.isValidElement(r)){var a;let e,o,i=(a=r,(o=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(o=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),c=function(e,t){let r={...t};for(let l in t){let a=e[l],n=t[l];/^on[A-Z]/.test(l)?a&&n?r[l]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(r[l]=a):"style"===l?r[l]={...a,...n}:"className"===l&&(r[l]=[a,n].filter(Boolean).join(" "))}return{...e,...r}}(l,r.props);return r.type!==n.Fragment&&(c.ref=t?(0,s.composeRefs)(t,i):i),n.cloneElement(r,c)}return n.Children.count(r)>1?n.Children.only(null):null})).displayName="PopoverContent.RemoveScroll.SlotClone",t=l,(r=n.forwardRef((e,r)=>{let{children:l,...o}=e,s=n.Children.toArray(l),i=s.find(g);if(i){let e=i.props.children,l=s.map(t=>t!==i?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...o,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,l):null})}return(0,a.jsx)(t,{...o,ref:r,children:l})})).displayName="PopoverContent.RemoveScroll.Slot",r),H=n.forwardRef((e,t)=>{let r=E(D,e.__scopePopover),l=n.useRef(null),i=(0,s.useComposedRefs)(t,l),c=n.useRef(!1);return n.useEffect(()=>{let e=l.current;if(e)return(0,y.hideOthers)(e)},[]),(0,a.jsx)(w.RemoveScroll,{as:_,allowPinchZoom:!0,children:(0,a.jsx)(z,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,o.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),c.current||r.triggerRef.current?.focus()}),onPointerDownOutside:(0,o.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;c.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,o.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),B=n.forwardRef((e,t)=>{let r=E(D,e.__scopePopover),l=n.useRef(!1),o=n.useRef(!1);return(0,a.jsx)(z,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(l.current||r.triggerRef.current?.focus(),t.preventDefault()),l.current=!1,o.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(l.current=!0,"pointerdown"===t.detail.originalEvent.type&&(o.current=!0));let a=t.target;r.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}})}),z=n.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:l,onOpenAutoFocus:n,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEscapeKeyDown:i,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:h,...v}=e,x=E(D,r),g=k(r);return(0,d.useFocusGuards)(),(0,a.jsx)(u.FocusScope,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:n,onUnmountAutoFocus:o,children:(0,a.jsx)(c.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:h,onEscapeKeyDown:i,onPointerDownOutside:f,onFocusOutside:m,onDismiss:()=>x.onOpenChange(!1),children:(0,a.jsx)(p.Content,{"data-state":$(x.open),role:"dialog",id:x.contentId,...g,...v,ref:t,style:{...v.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),V="PopoverClose";function $(e){return e?"open":"closed"}n.forwardRef((e,t)=>{let{__scopePopover:r,...l}=e,n=E(V,r);return(0,a.jsx)(v.Primitive.button,{type:"button",...l,ref:t,onClick:(0,o.composeEventHandlers)(e.onClick,()=>n.onOpenChange(!1))})}).displayName=V,n.forwardRef((e,t)=>{let{__scopePopover:r,...l}=e,n=k(r);return(0,a.jsx)(p.Arrow,{...n,...l,ref:t})}).displayName="PopoverArrow";var L=e.i(75157);let K=n.forwardRef(({className:e,align:t="center",sideOffset:r=4,...l},n)=>(0,a.jsx)(O,{children:(0,a.jsx)(q,{ref:n,align:t,sideOffset:r,className:(0,L.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...l})}));K.displayName=q.displayName,e.s(["Popover",()=>S,"PopoverContent",()=>K,"PopoverTrigger",()=>I],37822)},2984,e=>{"use strict";var t=e.i(43476),r=e.i(71645),l=e.i(18566),a=e.i(19455),n=e.i(93479),o=e.i(15288),s=e.i(7233),i=e.i(55436),c=e.i(75254);let d=(0,c.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var u=e.i(27612),f=e.i(31278);let p=(0,c.default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var m=e.i(37727),h=e.i(5899),v=e.i(41867),x=e.i(46696),g=e.i(84774),b=e.i(37822),y=/[\\\/_+.#"@\[\(\{&]/,w=/[\\\/_+.#"@\[\(\{&]/g,j=/[\s-]/,C=/[\s-]/g;function N(e){return e.toLowerCase().replace(C," ")}var k=e.i(26999),R=e.i(48425),E=e.i(10772),S=e.i(20783),P='[cmdk-group=""]',A='[cmdk-group-items=""]',I='[cmdk-item=""]',T=`${I}:not([aria-disabled="true"])`,F="cmdk-item-select",M="data-value",O=(e,t,r)=>{var l;return l=e,function e(t,r,l,a,n,o,s){if(o===r.length)return n===t.length?1:.99;var i=`${n},${o}`;if(void 0!==s[i])return s[i];for(var c,d,u,f,p=a.charAt(o),m=l.indexOf(p,n),h=0;m>=0;)(c=e(t,r,l,a,m+1,o+1,s))>h&&(m===n?c*=1:y.test(t.charAt(m-1))?(c*=.8,(u=t.slice(n,m-1).match(w))&&n>0&&(c*=Math.pow(.999,u.length))):j.test(t.charAt(m-1))?(c*=.9,(f=t.slice(n,m-1).match(C))&&n>0&&(c*=Math.pow(.999,f.length))):(c*=.17,n>0&&(c*=Math.pow(.999,m-n))),t.charAt(m)!==r.charAt(o)&&(c*=.9999)),(c<.1&&l.charAt(m-1)===a.charAt(o+1)||a.charAt(o+1)===a.charAt(o)&&l.charAt(m-1)!==a.charAt(o))&&.1*(d=e(t,r,l,a,m+1,o+2,s))>c&&(c=.1*d),c>h&&(h=c),m=l.indexOf(p,m+1);return s[i]=h,h}(l=r&&r.length>0?`${l+" "+r.join(" ")}`:l,t,N(l),N(t),0,0,{})},D=r.createContext(void 0),q=r.createContext(void 0),_=r.createContext(void 0),H=r.forwardRef((e,t)=>{let l=Q(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),a=Q(()=>new Set),n=Q(()=>new Map),o=Q(()=>new Map),s=Q(()=>new Set),i=U(e),{label:c,children:d,value:u,onValueChange:f,filter:p,shouldFilter:m,loop:h,disablePointerSelection:v=!1,vimBindings:x=!0,...g}=e,b=(0,E.useId)(),y=(0,E.useId)(),w=(0,E.useId)(),j=r.useRef(null),C=Y();W(()=>{if(void 0!==u){let e=u.trim();l.current.value=e,N.emit()}},[u]),W(()=>{C(6,z)},[]);let N=r.useMemo(()=>({subscribe:e=>(s.current.add(e),()=>s.current.delete(e)),snapshot:()=>l.current,setState:(e,t,r)=>{var a,n,o,s;if(!Object.is(l.current[e],t)){if(l.current[e]=t,"search"===e)B(),_(),C(1,H);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(w);e?e.focus():null==(a=document.getElementById(b))||a.focus()}if(C(7,()=>{var e;l.current.selectedItemId=null==(e=V())?void 0:e.id,N.emit()}),r||C(5,z),(null==(n=i.current)?void 0:n.value)!==void 0){null==(s=(o=i.current).onValueChange)||s.call(o,null!=t?t:"");return}}N.emit()}},emit:()=>{s.current.forEach(e=>e())}}),[]),k=r.useMemo(()=>({value:(e,t,r)=>{var a;t!==(null==(a=o.current.get(e))?void 0:a.value)&&(o.current.set(e,{value:t,keywords:r}),l.current.filtered.items.set(e,S(t,r)),C(2,()=>{_(),N.emit()}))},item:(e,t)=>(a.current.add(e),t&&(n.current.has(t)?n.current.get(t).add(e):n.current.set(t,new Set([e]))),C(3,()=>{B(),_(),l.current.value||H(),N.emit()}),()=>{o.current.delete(e),a.current.delete(e),l.current.filtered.items.delete(e);let t=V();C(4,()=>{B(),(null==t?void 0:t.getAttribute("id"))===e&&H(),N.emit()})}),group:e=>(n.current.has(e)||n.current.set(e,new Set),()=>{o.current.delete(e),n.current.delete(e)}),filter:()=>i.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>i.current.disablePointerSelection,listId:b,inputId:w,labelId:y,listInnerRef:j}),[]);function S(e,t){var r,a;let n=null!=(a=null==(r=i.current)?void 0:r.filter)?a:O;return e?n(e,l.current.search,t):0}function _(){if(!l.current.search||!1===i.current.shouldFilter)return;let e=l.current.filtered.items,t=[];l.current.filtered.groups.forEach(r=>{let l=n.current.get(r),a=0;l.forEach(t=>{a=Math.max(e.get(t),a)}),t.push([r,a])});let r=j.current;$().sort((t,r)=>{var l,a;let n=t.getAttribute("id"),o=r.getAttribute("id");return(null!=(l=e.get(o))?l:0)-(null!=(a=e.get(n))?a:0)}).forEach(e=>{let t=e.closest(A);t?t.appendChild(e.parentElement===t?e:e.closest(`${A} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${A} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=j.current)?void 0:t.querySelector(`${P}[${M}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function H(){let e=$().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(M);N.setState("value",t||void 0)}function B(){var e,t,r,s;if(!l.current.search||!1===i.current.shouldFilter){l.current.filtered.count=a.current.size;return}l.current.filtered.groups=new Set;let c=0;for(let n of a.current){let a=S(null!=(t=null==(e=o.current.get(n))?void 0:e.value)?t:"",null!=(s=null==(r=o.current.get(n))?void 0:r.keywords)?s:[]);l.current.filtered.items.set(n,a),a>0&&c++}for(let[e,t]of n.current)for(let r of t)if(l.current.filtered.items.get(r)>0){l.current.filtered.groups.add(e);break}l.current.filtered.count=c}function z(){var e,t,r;let l=V();l&&((null==(e=l.parentElement)?void 0:e.firstChild)===l&&(null==(r=null==(t=l.closest(P))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),l.scrollIntoView({block:"nearest"}))}function V(){var e;return null==(e=j.current)?void 0:e.querySelector(`${I}[aria-selected="true"]`)}function $(){var e;return Array.from((null==(e=j.current)?void 0:e.querySelectorAll(T))||[])}function L(e){let t=$()[e];t&&N.setState("value",t.getAttribute(M))}function K(e){var t;let r=V(),l=$(),a=l.findIndex(e=>e===r),n=l[a+e];null!=(t=i.current)&&t.loop&&(n=a+e<0?l[l.length-1]:a+e===l.length?l[0]:l[a+e]),n&&N.setState("value",n.getAttribute(M))}function G(e){let t=V(),r=null==t?void 0:t.closest(P),l;for(;r&&!l;)l=null==(r=e>0?function(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}(r,P):function(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}(r,P))?void 0:r.querySelector(T);l?N.setState("value",l.getAttribute(M)):K(e)}let X=()=>L($().length-1),Z=e=>{e.preventDefault(),e.metaKey?X():e.altKey?G(1):K(1)},et=e=>{e.preventDefault(),e.metaKey?L(0):e.altKey?G(-1):K(-1)};return r.createElement(R.Primitive.div,{ref:t,tabIndex:-1,...g,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=g.onKeyDown)||t.call(g,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!(e.defaultPrevented||r))switch(e.key){case"n":case"j":x&&e.ctrlKey&&Z(e);break;case"ArrowDown":Z(e);break;case"p":case"k":x&&e.ctrlKey&&et(e);break;case"ArrowUp":et(e);break;case"Home":e.preventDefault(),L(0);break;case"End":e.preventDefault(),X();break;case"Enter":{e.preventDefault();let t=V();if(t){let e=new Event(F);t.dispatchEvent(e)}}}}},r.createElement("label",{"cmdk-label":"",htmlFor:k.inputId,id:k.labelId,style:ee},c),J(e,e=>r.createElement(q.Provider,{value:N},r.createElement(D.Provider,{value:k},e))))}),B=r.forwardRef((e,t)=>{var l,a;let n=(0,E.useId)(),o=r.useRef(null),s=r.useContext(_),i=r.useContext(D),c=U(e),d=null!=(a=null==(l=c.current)?void 0:l.forceMount)?a:null==s?void 0:s.forceMount;W(()=>{if(!d)return i.item(n,null==s?void 0:s.id)},[d]);let u=Z(n,o,[e.value,e.children,o],e.keywords),f=r.useContext(q),p=X(e=>e.value&&e.value===u.current),m=X(e=>!!d||!1===i.filter()||!e.search||e.filtered.items.get(n)>0);function h(){var e,t;v(),null==(t=(e=c.current).onSelect)||t.call(e,u.current)}function v(){f.setState("value",u.current,!0)}if(r.useEffect(()=>{let t=o.current;if(!(!t||e.disabled))return t.addEventListener(F,h),()=>t.removeEventListener(F,h)},[m,e.onSelect,e.disabled]),!m)return null;let{disabled:x,value:g,onSelect:b,forceMount:y,keywords:w,...j}=e;return r.createElement(R.Primitive.div,{ref:(0,S.composeRefs)(o,t),...j,id:n,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!p,"data-disabled":!!x,"data-selected":!!p,onPointerMove:x||i.getDisablePointerSelection()?void 0:v,onClick:x?void 0:h},e.children)}),z=r.forwardRef((e,t)=>{let{heading:l,children:a,forceMount:n,...o}=e,s=(0,E.useId)(),i=r.useRef(null),c=r.useRef(null),d=(0,E.useId)(),u=r.useContext(D),f=X(e=>!!n||!1===u.filter()||!e.search||e.filtered.groups.has(s));W(()=>u.group(s),[]),Z(s,i,[e.value,e.heading,c]);let p=r.useMemo(()=>({id:s,forceMount:n}),[n]);return r.createElement(R.Primitive.div,{ref:(0,S.composeRefs)(i,t),...o,"cmdk-group":"",role:"presentation",hidden:!f||void 0},l&&r.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},l),J(e,e=>r.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":l?d:void 0},r.createElement(_.Provider,{value:p},e))))}),V=r.forwardRef((e,t)=>{let{alwaysRender:l,...a}=e,n=r.useRef(null),o=X(e=>!e.search);return l||o?r.createElement(R.Primitive.div,{ref:(0,S.composeRefs)(n,t),...a,"cmdk-separator":"",role:"separator"}):null}),$=r.forwardRef((e,t)=>{let{onValueChange:l,...a}=e,n=null!=e.value,o=r.useContext(q),s=X(e=>e.search),i=X(e=>e.selectedItemId),c=r.useContext(D);return r.useEffect(()=>{null!=e.value&&o.setState("search",e.value)},[e.value]),r.createElement(R.Primitive.input,{ref:t,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":i,id:c.inputId,type:"text",value:n?e.value:s,onChange:e=>{n||o.setState("search",e.target.value),null==l||l(e.target.value)}})}),L=r.forwardRef((e,t)=>{let{children:l,label:a="Suggestions",...n}=e,o=r.useRef(null),s=r.useRef(null),i=X(e=>e.selectedItemId),c=r.useContext(D);return r.useEffect(()=>{if(s.current&&o.current){let e=s.current,t=o.current,r,l=new ResizeObserver(()=>{r=requestAnimationFrame(()=>{let r=e.offsetHeight;t.style.setProperty("--cmdk-list-height",r.toFixed(1)+"px")})});return l.observe(e),()=>{cancelAnimationFrame(r),l.unobserve(e)}}},[]),r.createElement(R.Primitive.div,{ref:(0,S.composeRefs)(o,t),...n,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":i,"aria-label":a,id:c.listId},J(e,e=>r.createElement("div",{ref:(0,S.composeRefs)(s,c.listInnerRef),"cmdk-list-sizer":""},e)))}),K=r.forwardRef((e,t)=>{let{open:l,onOpenChange:a,overlayClassName:n,contentClassName:o,container:s,...i}=e;return r.createElement(k.Root,{open:l,onOpenChange:a},r.createElement(k.Portal,{container:s},r.createElement(k.Overlay,{"cmdk-overlay":"",className:n}),r.createElement(k.Content,{"aria-label":e.label,"cmdk-dialog":"",className:o},r.createElement(H,{ref:t,...i}))))}),G=Object.assign(H,{List:L,Item:B,Input:$,Group:z,Separator:V,Dialog:K,Empty:r.forwardRef((e,t)=>X(e=>0===e.filtered.count)?r.createElement(R.Primitive.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Loading:r.forwardRef((e,t)=>{let{progress:l,children:a,label:n="Loading...",...o}=e;return r.createElement(R.Primitive.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":l,"aria-valuemin":0,"aria-valuemax":100,"aria-label":n},J(e,e=>r.createElement("div",{"aria-hidden":!0},e)))})});function U(e){let t=r.useRef(e);return W(()=>{t.current=e}),t}var W="undefined"==typeof window?r.useEffect:r.useLayoutEffect;function Q(e){let t=r.useRef();return void 0===t.current&&(t.current=e()),t}function X(e){let t=r.useContext(q),l=()=>e(t.snapshot());return r.useSyncExternalStore(t.subscribe,l,l)}function Z(e,t,l,a=[]){let n=r.useRef(),o=r.useContext(D);return W(()=>{var r;let s=(()=>{var e;for(let t of l){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():n.current}})(),i=a.map(e=>e.trim());o.value(e,s,i),null==(r=t.current)||r.setAttribute(M,s),n.current=s}),n}var Y=()=>{let[e,t]=r.useState(),l=Q(()=>new Map);return W(()=>{l.current.forEach(e=>e()),l.current=new Map},[e]),(e,r)=>{l.current.set(e,r),t({})}};function J({asChild:e,children:t},l){let a;return e&&r.isValidElement(t)?r.cloneElement("function"==typeof(a=t.type)?a(t.props):"render"in a?a.render(t.props):t,{ref:t.ref},l(t.props.children)):l(t)}var ee={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},et=e.i(75157);e.i(76639);let er=r.forwardRef(({className:e,...r},l)=>(0,t.jsx)(G,{ref:l,className:(0,et.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...r}));er.displayName=G.displayName;let el=r.forwardRef(({className:e,...r},l)=>(0,t.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,t.jsx)(i.Search,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,t.jsx)(G.Input,{ref:l,className:(0,et.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...r})]}));el.displayName=G.Input.displayName;let ea=r.forwardRef(({className:e,...r},l)=>(0,t.jsx)(G.List,{ref:l,className:(0,et.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...r}));ea.displayName=G.List.displayName;let en=r.forwardRef((e,r)=>(0,t.jsx)(G.Empty,{ref:r,className:"py-6 text-center text-sm",...e}));en.displayName=G.Empty.displayName;let eo=r.forwardRef(({className:e,...r},l)=>(0,t.jsx)(G.Group,{ref:l,className:(0,et.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...r}));eo.displayName=G.Group.displayName,r.forwardRef(({className:e,...r},l)=>(0,t.jsx)(G.Separator,{ref:l,className:(0,et.cn)("-mx-1 h-px bg-border",e),...r})).displayName=G.Separator.displayName;let es=r.forwardRef(({className:e,...r},l)=>(0,t.jsx)(G.Item,{ref:l,className:(0,et.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...r}));es.displayName=G.Item.displayName;var ei=e.i(43531),ec=e.i(48085);let ed=()=>{let e=(0,l.useRouter)(),[c,y]=(0,r.useState)(""),[w,j]=(0,r.useState)([]),[C,N]=(0,r.useState)(!0),[k,R]=(0,r.useState)(null),[E,S]=(0,r.useState)(null),[P,A]=(0,r.useState)(null),[I,T]=(0,r.useState)([]),[F,M]=(0,r.useState)([]),[O,D]=(0,r.useState)(0);(0,r.useEffect)(()=>{q()},[]),(0,r.useEffect)(()=>{D(0),_()},[k,E,P,c]),(0,r.useEffect)(()=>{_()},[O]);let q=async()=>{try{let{data:e}=await v.supabase.from("questions").select("topic").not("topic","is",null);if(e){let t=Array.from(new Set(e.map(e=>e.topic))).sort();T(t)}let{data:t}=await v.supabase.from("questions").select("subtopic").not("subtopic","is",null);if(t){let e=Array.from(new Set(t.map(e=>e.subtopic))).sort();M(e)}}catch(e){console.error("Error fetching metadata:",e)}},_=async()=>{N(!0);try{let e=v.supabase.from("questions").select("id, question_text, difficulty, subtopic, topic",{count:"exact"});c&&(e=e.ilike("question_text",`%${c}%`)),k&&(e=e.eq("topic",k)),E&&(e=e.eq("subtopic",E)),P&&(e=e.eq("difficulty",P));let t=20*O,{data:r,error:l}=await e.order("created_at",{ascending:!1}).range(t,t+20-1);if(l)throw l;j(r||[])}catch(e){x.toast.error("Failed to fetch questions"),console.error(e)}finally{N(!1)}};(0,r.useEffect)(()=>{let e=setTimeout(()=>{D(0),_()},500);return()=>clearTimeout(e)},[c]);let H=async e=>{if(confirm("Are you sure you want to delete this question?"))try{let{error:t}=await v.supabase.from("questions").delete().eq("id",e);if(t)throw t;x.toast.success("Question deleted"),j(w.filter(t=>t.id!==e))}catch(e){x.toast.error("Failed to delete question"),console.error(e)}},B=({title:e,options:l,value:n,onChange:o})=>{let[s,i]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{children:e}),(0,t.jsxs)(b.Popover,{open:s,onOpenChange:i,children:[(0,t.jsx)(b.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",className:(0,et.cn)("h-8 w-8 p-0",n&&"text-primary bg-primary/10"),children:(0,t.jsx)(p,{className:"h-4 w-4"})})}),(0,t.jsx)(b.PopoverContent,{className:"w-[200px] p-0",align:"start",children:(0,t.jsxs)(er,{children:[(0,t.jsx)(el,{placeholder:`Filter ${e}...`}),(0,t.jsxs)(ea,{children:[(0,t.jsx)(en,{children:"No results found."}),(0,t.jsxs)(eo,{children:[(0,t.jsxs)(es,{onSelect:()=>{o(null),i(!1)},children:[(0,t.jsx)(ei.Check,{className:(0,et.cn)("mr-2 h-4 w-4",null===n?"opacity-100":"opacity-0")}),"All"]}),l.map(e=>(0,t.jsxs)(es,{onSelect:()=>{o(e===n?null:e),i(!1)},children:[(0,t.jsx)(ei.Check,{className:(0,et.cn)("mr-2 h-4 w-4",n===e?"opacity-100":"opacity-0")}),e]},e))]})]})]})})]})]})};return(0,t.jsx)("div",{className:"min-h-screen bg-background p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Operator Dashboard"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(a.Button,{variant:"outline",onClick:()=>e.push("/operator/reports"),children:[(0,t.jsx)(h.Flag,{className:"w-4 h-4 mr-2"}),"View Reports"]}),(0,t.jsxs)(a.Button,{onClick:()=>e.push("/operator/editor/new"),children:[(0,t.jsx)(s.Plus,{className:"w-4 h-4 mr-2"}),"Add Question"]})]})]}),(0,t.jsxs)(o.Card,{children:[(0,t.jsxs)(o.CardHeader,{children:[(0,t.jsx)(o.CardTitle,{children:"Manage Questions"}),(0,t.jsxs)("div",{className:"pt-4 space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(n.Input,{placeholder:"Search questions...",value:c,onChange:e=>y(e.target.value),className:"pl-10"})]}),(k||E||P)&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[k&&(0,t.jsxs)(a.Button,{variant:"secondary",size:"sm",onClick:()=>R(null),className:"h-7 text-xs",children:["Topic: ",k," ",(0,t.jsx)(m.X,{className:"ml-1 h-3 w-3"})]}),E&&(0,t.jsxs)(a.Button,{variant:"secondary",size:"sm",onClick:()=>S(null),className:"h-7 text-xs",children:["Subtopic: ",E," ",(0,t.jsx)(m.X,{className:"ml-1 h-3 w-3"})]}),P&&(0,t.jsxs)(a.Button,{variant:"secondary",size:"sm",onClick:()=>A(null),className:"h-7 text-xs",children:["Difficulty: ",P," ",(0,t.jsx)(m.X,{className:"ml-1 h-3 w-3"})]}),(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",onClick:()=>{R(null),S(null),A(null)},className:"h-7 text-xs text-muted-foreground hover:text-foreground",children:"Clear all"})]})]})]}),(0,t.jsx)(o.CardContent,{children:C?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(f.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g.Table,{children:[(0,t.jsx)(g.TableHeader,{children:(0,t.jsxs)(g.TableRow,{children:[(0,t.jsx)(g.TableHead,{className:"w-[400px]",children:"Question"}),(0,t.jsx)(g.TableHead,{children:(0,t.jsx)(B,{title:"Topic",options:I,value:k,onChange:R})}),(0,t.jsx)(g.TableHead,{children:(0,t.jsx)(B,{title:"Subtopic",options:F,value:E,onChange:S})}),(0,t.jsx)(g.TableHead,{children:(0,t.jsx)(B,{title:"Difficulty",options:["Easy","Medium","Hard"],value:P,onChange:A})}),(0,t.jsx)(g.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsxs)(g.TableBody,{children:[w.map(r=>(0,t.jsxs)(g.TableRow,{children:[(0,t.jsx)(g.TableCell,{className:"font-medium truncate max-w-[400px]",children:r.question_text}),(0,t.jsx)(g.TableCell,{children:r.topic}),(0,t.jsx)(g.TableCell,{children:r.subtopic}),(0,t.jsx)(g.TableCell,{children:(0,t.jsx)("span",{className:`px-2 py-1 rounded-full text-xs ${"Easy"===r.difficulty?"bg-green-100 text-green-800":"Medium"===r.difficulty?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:r.difficulty})}),(0,t.jsxs)(g.TableCell,{className:"text-right space-x-2",children:[(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",onClick:()=>e.push(`/operator/editor/${r.id}`),children:(0,t.jsx)(d,{className:"w-4 h-4"})}),(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",onClick:()=>H(r.id),className:"text-red-500 hover:text-red-700",children:(0,t.jsx)(u.Trash2,{className:"w-4 h-4"})})]})]},r.id)),0===w.length&&(0,t.jsx)(g.TableRow,{children:(0,t.jsx)(g.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No questions found"})})]})]}),(0,t.jsxs)("div",{className:"flex justify-end items-center space-x-2 pt-4",children:[(0,t.jsx)(a.Button,{variant:"outline",size:"sm",onClick:()=>D(e=>Math.max(0,e-1)),disabled:0===O,children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",O+1]}),(0,t.jsx)(a.Button,{variant:"outline",size:"sm",onClick:()=>D(e=>e+1),disabled:w.length<20,children:"Next"})]})]})})]})]})})};e.s(["default",0,()=>(0,t.jsx)(ec.OperatorRoute,{children:(0,t.jsx)(ed,{})})],2984)}]);