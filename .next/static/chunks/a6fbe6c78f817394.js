(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19455,91918,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(20783),s=Symbol.for("react.lazy"),n=a[" use ".trim().toString()];function o(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===s&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function l(e){var s;let l,i=(s=e,(l=a.forwardRef((e,t)=>{let{children:s,...l}=e;if(o(s)&&"function"==typeof n&&(s=n(s._payload)),a.isValidElement(s)){var i;let e,n,o=(i=s,(n=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(n=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),c=function(e,t){let a={...t};for(let r in t){let s=e[r],n=t[r];/^on[A-Z]/.test(r)?s&&n?a[r]=(...e)=>{let t=n(...e);return s(...e),t}:s&&(a[r]=s):"style"===r?a[r]={...s,...n}:"className"===r&&(a[r]=[s,n].filter(Boolean).join(" "))}return{...e,...a}}(l,s.props);return s.type!==a.Fragment&&(c.ref=t?(0,r.composeRefs)(t,o):o),a.cloneElement(s,c)}return a.Children.count(s)>1?a.Children.only(null):null})).displayName=`${s}.SlotClone`,l),c=a.forwardRef((e,r)=>{let{children:s,...l}=e;o(s)&&"function"==typeof n&&(s=n(s._payload));let c=a.Children.toArray(s),d=c.find(m);if(d){let e=d.props.children,s=c.map(t=>t!==d?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,t.jsx)(i,{...l,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,s):null})}return(0,t.jsx)(i,{...l,ref:r,children:s})});return c.displayName=`${e}.Slot`,c}var i=l("Slot"),c=Symbol("radix.slottable");function m(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}e.s(["Slot",()=>i,"createSlot",()=>l],91918);var d=e.i(25913),p=e.i(75157);let u=(0,d.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=a.forwardRef(({className:e,variant:a,size:r,asChild:s=!1,...n},o)=>(0,t.jsx)(s?i:"button",{className:(0,p.cn)(u({variant:a,size:r,className:e})),ref:o,...n}));h.displayName="Button",e.s(["Button",()=>h,"buttonVariants",()=>u],19455)},68148,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(74080);var r=e.i(91918),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let n=(0,r.createSlot)(`Primitive.${s}`),o=a.forwardRef((e,a)=>{let{asChild:r,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(r?n:s,{...o,ref:a})});return o.displayName=`Primitive.${s}`,{...e,[s]:o}},{}),n="Progress",[o,l]=function(e,r=[]){let s=[],n=()=>{let t=s.map(e=>a.createContext(e));return function(r){let s=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:s}}),[r,s])}};return n.scopeName=e,[function(r,n){let o=a.createContext(n);o.displayName=r+"Context";let l=s.length;s=[...s,n];let i=r=>{let{scope:s,children:n,...i}=r,c=s?.[e]?.[l]||o,m=a.useMemo(()=>i,Object.values(i));return(0,t.jsx)(c.Provider,{value:m,children:n})};return i.displayName=r+"Provider",[i,function(t,s){let i=s?.[e]?.[l]||o,c=a.useContext(i);if(c)return c;if(void 0!==n)return n;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=r.reduce((t,{useScope:a,scopeName:r})=>{let s=a(e)[`__scope${r}`];return{...t,...s}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}(n,...r)]}(n),[i,c]=o(n),m=a.forwardRef((e,a)=>{var r,n;let{__scopeProgress:o,value:l=null,max:c,getValueLabel:m=u,...d}=e;(c||0===c)&&!f(c)&&console.error((r=`${c}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let p=f(c)?c:100;null===l||y(l,p)||console.error((n=`${l}`,`Invalid prop \`value\` of value \`${n}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let x=y(l,p)?l:null,v=g(x)?m(x,p):void 0;return(0,t.jsx)(i,{scope:o,value:x,max:p,children:(0,t.jsx)(s.div,{"aria-valuemax":p,"aria-valuemin":0,"aria-valuenow":g(x)?x:void 0,"aria-valuetext":v,role:"progressbar","data-state":h(x,p),"data-value":x??void 0,"data-max":p,...d,ref:a})})});m.displayName=n;var d="ProgressIndicator",p=a.forwardRef((e,a)=>{let{__scopeProgress:r,...n}=e,o=c(d,r);return(0,t.jsx)(s.div,{"data-state":h(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...n,ref:a})});function u(e,t){return`${Math.round(e/t*100)}%`}function h(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function g(e){return"number"==typeof e}function f(e){return g(e)&&!isNaN(e)&&e>0}function y(e,t){return g(e)&&!isNaN(e)&&e<=t&&e>=0}p.displayName=d;var x=e.i(75157);let v=a.forwardRef(({className:e,value:a,...r},s)=>(0,t.jsx)(m,{ref:s,className:(0,x.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:(0,t.jsx)(p,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));v.displayName=m.displayName,e.s(["Progress",()=>v],68148)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},51778,e=>{"use strict";var t=e.i(43476),a=e.i(71645);console.log("Map Data Loaded: "+Date.now());let r=Array(40).fill(null).map(()=>Array(50).fill(0));for(let e=0;e<40;e++)for(let t=0;t<50;t++)(t<2||t>47||e<2||e>37)&&(r[e][t]=160);for(let e=2;e<48;e++)r[15][e]=25,r[16][e]=25,r[25][e]=25,r[26][e]=25;for(let e=2;e<38;e++)r[e][12]=25,r[e][13]=25,r[e][28]=25,r[e][29]=25;let s=(e,t,a,s,n,o,l)=>{for(let o=t;o<t+s-2;o++)for(let s=e;s<e+a;s++)r[o][s]=n+(s-e)+(o-t)*8;for(let n=t+s-2;n<t+s;n++)for(let t=e;t<e+a;t++)r[n][t]=o;r[t+s-1][e+l]=1779,a>3&&(r[t+s-2][e+1]=1685,r[t+s-2][e+a-2]=1685)};s(8,6,4,4,1584,1684,2),s(14,6,4,4,1628,1684,2),s(35,10,6,5,1584,1834,3),s(32,6,4,4,1976,1684,1),s(32,28,4,4,1976,1684,1),s(8,28,4,4,1976,1684,1),s(18,18,6,5,1628,1834,3);for(let e=6;e<12;e++)r[e][6]=72;r[18][10]=16,r[18][11]=16,r[19][10]=16,r[19][11]=16;let n={id:"numbers_town",width:50,height:40,tiles:r,events:[{id:"prof_logic",position:{x:21,y:24},type:"NPC",trigger:"ACTION",data:{name:"Professor Logic",sprite:"/assets/math-rpg/characters/blond.png",dialog:["Welcome to Numbers Town!","We are in a state of Statistical Chaos.","The Logic Fog has jammed the Prime Regulator.","Here, take this Variable Tracker.","Interview the residents to find the missing data points."],questUpdate:"START"}},{id:"student",position:{x:10,y:33},type:"NPC",trigger:"ACTION",data:{name:"Student",sprite:"/assets/math-rpg/characters/young_guy.png",dialog:["I can't finish my homework!","My records are incomplete...","The average temperature for Wednesday, Thursday, and Friday was 40°C."],questUpdate:"CLUE_STUDENT"}},{id:"clerk",position:{x:16,y:11},type:"NPC",trigger:"ACTION",data:{name:"Clerk",sprite:"/assets/math-rpg/characters/hat_girl.png",dialog:["The warehouse readings are weird.","The system says the average for Thursday, Friday, and Saturday was 41°C."],questUpdate:"CLUE_CLERK"}},{id:"old_man",position:{x:39,y:17},type:"NPC",trigger:"ACTION",data:{name:"Old Man",sprite:"/assets/math-rpg/characters/straw.png",dialog:["It was so hot before the fog rolled in!","I checked the thermometer myself...","Saturday was a scorching 42°C!"],questUpdate:"CLUE_OLDMAN"}},{id:"fountain",position:{x:21,y:16},type:"NPC",trigger:"ACTION",data:{name:"Prime Regulator",sprite:"",dialog:["The Prime Regulator is humming...","ENTER THE TRUE VARIABLE FOR WEDNESDAY."],isPuzzle:!0}},{id:"gym_door",position:{x:39,y:15},type:"NPC",trigger:"ACTION",data:{name:"Gym Door",sprite:"",dialog:["The door is locked.","A sign reads: 'Gym Closed due to Logic Fog.'"],checkGymLock:!0}},{id:"town_guide",position:{x:12,y:18},type:"NPC",trigger:"ACTION",data:{name:"Town Guide",sprite:"/assets/math-rpg/characters/young_girl.png",dialog:["Numbers Town is known for its precision.","Don't step on the grass if you don't want to calculate!"]}},{id:"kid_1",position:{x:32,y:33},type:"NPC",trigger:"ACTION",data:{name:"Kid",sprite:"/assets/math-rpg/characters/young_guy.png",dialog:["My Pidgey has higher Speed stats than yours!"]}}]},o=({map:e,playerPos:r,playerDir:s,isMoving:n})=>{let o=(0,a.useRef)(null),l=(0,a.useRef)(new Image),i=(0,a.useRef)(new Image),c=(0,a.useRef)({}),[m,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let t=()=>{l.current.complete&&i.current.complete&&d(!0)};l.current.onload=()=>{t()},i.current.onload=()=>{t()},l.current.src="/assets/math-rpg/tilesets/world.png",i.current.src="/assets/math-rpg/characters/player.png",e.events.forEach(e=>{if("NPC"===e.type&&e.data?.sprite){let t=e.data.sprite;if(!c.current[t]){let e=new Image;e.onload=()=>{},e.onerror=()=>console.error(`NPC Error: ${t}`),e.src=t,c.current[t]=e}}}),l.current.complete&&i.current.complete&&d(!0)},[e]),(0,a.useEffect)(()=>{let t=o.current;if(!t)return;let a=t.getContext("2d");if(!a)return;a.imageSmoothingEnabled=!1,a.fillStyle="#000",a.fillRect(0,0,t.width,t.height);let l=Math.max(0,Math.min(e.width-15,r.x-Math.floor(7.5))),m=Math.max(0,Math.min(e.height-11,r.y-Math.floor(5.5)));a.save(),a.scale(2,2);for(let t=0;t<11;t++)for(let r=0;r<15;r++){let s=l+r,n=m+t;if(s>=0&&s<e.width&&n>=0&&n<e.height){let o=e.tiles[n][s];p(a,0,32*r,32*t),0!==o&&p(a,o,32*r,32*t)}}e.events.forEach(e=>{if("NPC"===e.type){let t=(e.position.x-l)*32,r=(e.position.y-m)*32;if(t>=-32&&t<480&&r>=-32&&r<352){let s=e.data?.sprite,n=s?c.current[s]:null;n&&n.complete&&n.naturalWidth>0?u(a,n,t,r,"DOWN",!1):u(a,i.current,t,r,"DOWN",!1)}}});let d=(r.x-l)*32,h=(r.y-m)*32;u(a,i.current,d,h,s,n),a.restore()},[e,r,s,n,m]);let p=(e,t,a,r)=>{let s=32*Math.floor(t/8);l.current.complete&&l.current.naturalWidth>0?e.drawImage(l.current,t%8*32,s,32,32,a,r,32,32):(e.fillStyle="#4ade80",e.fillRect(a,r,32,32))},u=(e,t,a,r,s,n)=>{let o=0;switch(s){case"DOWN":o=0;break;case"LEFT":o=1;break;case"RIGHT":o=2;break;case"UP":o=3}let l=n?Math.floor(Date.now()/200)%4:0;t&&t.complete&&t.naturalWidth>0?e.drawImage(t,32*l,48*o,32,48,a,r-16,32,48):(e.fillStyle="red",e.fillRect(a,r,32,32))};return(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("canvas",{ref:o,width:960,height:704,className:"border-4 border-slate-700 rounded-lg shadow-2xl bg-black"})})};var l=e.i(19455),i=e.i(68148);let c={burn:{target:"opponent",amount:2,cost:15,element:"fire",animation:"fire"},heal:{target:"player",amount:-1.2,cost:600,element:"plant",animation:"green"},battlecry:{target:"player",amount:-1.4,cost:20,element:"normal",animation:"green"},spark:{target:"opponent",amount:1.1,cost:20,element:"fire",animation:"fire"},scratch:{target:"opponent",amount:1.2,cost:20,element:"normal",animation:"scratch"},splash:{target:"opponent",amount:2,cost:15,element:"water",animation:"splash"},fire:{target:"opponent",amount:2,cost:15,element:"fire",animation:"fire"},explosion:{target:"opponent",amount:2,cost:90,element:"fire",animation:"explosion"},annihilate:{target:"opponent",amount:3,cost:30,element:"fire",animation:"explosion"},ice:{target:"opponent",amount:2,cost:15,element:"water",animation:"ice"}},m=({battleState:e,onAttack:r,onRun:s,onAnswer:n})=>{let{playerPokemon:o,enemyPokemon:m,message:d,phase:p}=e,[u,h]=(0,a.useState)("");return(0,t.jsxs)("div",{className:"relative w-full h-full bg-slate-800 flex items-center justify-center overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 z-0",children:(0,t.jsx)("img",{src:"/assets/pokemon/Battlebacks/field_bg.png",className:"w-full h-full object-cover",alt:"Battle Background"})}),(0,t.jsx)("div",{className:"absolute bottom-10 left-10 z-10",children:(0,t.jsx)("img",{src:"/assets/pokemon/Battlebacks/field_base0.png",className:"w-64",alt:"Player Base"})}),(0,t.jsx)("div",{className:"absolute top-20 right-10 z-10",children:(0,t.jsx)("img",{src:"/assets/pokemon/Battlebacks/field_base1.png",className:"w-64",alt:"Enemy Base"})}),(0,t.jsx)("div",{className:"absolute bottom-20 left-20 z-20 animate-bounce-slow",children:(0,t.jsx)("img",{src:o.spriteBack,className:"w-48 h-48 object-contain pixelated",alt:o.name})}),(0,t.jsx)("div",{className:"absolute top-24 right-24 z-20 animate-float",children:(0,t.jsx)("img",{src:m.spriteFront,className:"w-40 h-40 object-contain pixelated",alt:m.name})}),(0,t.jsxs)("div",{className:"absolute top-10 left-10 bg-white/90 p-4 rounded-lg shadow-lg border-2 border-slate-600 z-30 w-64",children:[(0,t.jsxs)("h3",{className:"font-bold text-lg flex justify-between",children:[m.name,(0,t.jsxs)("span",{className:"text-sm text-slate-500",children:["Lv",m.level]})]}),(0,t.jsx)(i.Progress,{value:m.hp/m.maxHp*100,className:"h-2 mt-2 bg-slate-200 [&>div]:bg-red-500"})]}),(0,t.jsxs)("div",{className:"absolute bottom-32 right-10 bg-white/90 p-4 rounded-lg shadow-lg border-2 border-slate-600 z-30 w-64",children:[(0,t.jsxs)("h3",{className:"font-bold text-lg flex justify-between",children:[o.name,(0,t.jsxs)("span",{className:"text-sm text-slate-500",children:["Lv",o.level]})]}),(0,t.jsx)(i.Progress,{value:o.hp/o.maxHp*100,className:"h-2 mt-2 bg-slate-200 [&>div]:bg-green-500"}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,t.jsxs)("p",{className:"text-sm font-mono text-slate-600",children:["HP: ",o.hp.toFixed(0),"/",o.maxHp]}),(0,t.jsxs)("p",{className:"text-xs font-mono text-blue-600",children:["NRG: ",o.energy.toFixed(0)]})]})]}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-slate-900/90 border-t-4 border-slate-600 p-4 z-40 flex gap-4",children:[(0,t.jsx)("div",{className:"flex-1 bg-slate-800 rounded p-4 border-2 border-slate-600 text-white text-xl font-mono",children:"QUESTION"===p&&e.currentQuestion?(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"mb-2",children:["Solve: ",e.currentQuestion.text]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(u),h("")},className:"flex gap-2",children:[(0,t.jsx)("input",{autoFocus:!0,type:"text",value:u,onChange:e=>h(e.target.value),className:"bg-slate-700 border border-slate-500 rounded px-2 py-1 text-white w-32"}),(0,t.jsx)(l.Button,{type:"submit",size:"sm",children:"Submit"})]})]}):(0,t.jsx)("p",{children:d})}),"MENU"===p&&(0,t.jsxs)("div",{className:"w-80 grid grid-cols-2 gap-2 overflow-y-auto",children:[o.abilities.map(e=>{let a=c[e],s=a?a.cost:0,n=a?a.element:"normal",i="bg-slate-600 hover:bg-slate-700";return"fire"===n&&(i="bg-red-600 hover:bg-red-700"),"water"===n&&(i="bg-blue-600 hover:bg-blue-700"),"plant"===n&&(i="bg-green-600 hover:bg-green-700"),(0,t.jsxs)(l.Button,{onClick:()=>r(e),className:`${i} text-white font-bold text-xs uppercase flex justify-between`,disabled:o.energy<s,children:[(0,t.jsx)("span",{children:e}),(0,t.jsxs)("span",{className:"text-[10px] opacity-75",children:[s," E"]})]},e)}),(0,t.jsx)(l.Button,{onClick:s,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold text-xs",children:"RUN"})]})]})]})};var d=e.i(75254);let p=(0,d.default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),u=(0,d.default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var h=e.i(71689),g=e.i(72520),f=e.i(41867);let y=async()=>{try{let{data:e,error:t}=await f.supabase.from("questions").select("id, question_text, correct_answer").eq("topic","Math").limit(20);if(t)return console.error("Error fetching questions:",t),null;if(e&&e.length>0){let t=Math.floor(Math.random()*e.length),a=e[t];return{id:a.id,text:a.question_text,answer:a.correct_answer}}return null}catch(e){return console.error("Exception fetching questions:",e),null}},x={Plumette:{id:"Plumette",name:"Plumette",level:5,hp:15,maxHp:15,stats:{attack:4,defense:8,speed:1,recovery:1},element:"plant",energy:17,maxEnergy:17,abilities:["scratch","spark"],spriteFront:"/assets/math-rpg/monsters/Plumette.png",spriteBack:"/assets/math-rpg/monsters/Plumette.png"},Ivieron:{id:"Ivieron",name:"Ivieron",level:32,hp:18,maxHp:18,stats:{attack:5,defense:10,speed:1.2,recovery:1.2},element:"plant",energy:20,maxEnergy:20,abilities:["scratch","spark"],spriteFront:"/assets/math-rpg/monsters/Ivieron.png",spriteBack:"/assets/math-rpg/monsters/Ivieron.png"},Pluma:{id:"Pluma",name:"Pluma",level:35,hp:23,maxHp:23,stats:{attack:6,defense:12,speed:1.8,recovery:1.8},element:"plant",energy:26,maxEnergy:26,abilities:["scratch","spark"],spriteFront:"/assets/math-rpg/monsters/Pluma.png",spriteBack:"/assets/math-rpg/monsters/Pluma.png"},Sparchu:{id:"Sparchu",name:"Sparchu",level:11,hp:15,maxHp:15,stats:{attack:3,defense:8,speed:1,recovery:1.1},element:"fire",energy:7,maxEnergy:7,abilities:["scratch","fire","battlecry","explosion"],spriteFront:"/assets/math-rpg/monsters/Sparchu.png",spriteBack:"/assets/math-rpg/monsters/Sparchu.png"},Cindrill:{id:"Cindrill",name:"Cindrill",level:16,hp:18,maxHp:18,stats:{attack:3.5,defense:10,speed:1.1,recovery:1.2},element:"fire",energy:10,maxEnergy:10,abilities:["scratch","fire","battlecry","explosion"],spriteFront:"/assets/math-rpg/monsters/Cindrill.png",spriteBack:"/assets/math-rpg/monsters/Cindrill.png"},Charmadillo:{id:"Charmadillo",name:"Charmadillo",level:33,hp:29,maxHp:29,stats:{attack:4,defense:17,speed:1.1,recovery:1.35},element:"fire",energy:12,maxEnergy:12,abilities:["scratch","fire","battlecry","explosion","annihilate"],spriteFront:"/assets/math-rpg/monsters/Charmadillo.png",spriteBack:"/assets/math-rpg/monsters/Charmadillo.png"},Finsta:{id:"Finsta",name:"Finsta",level:15,hp:13,maxHp:13,stats:{attack:2,defense:8,speed:1.8,recovery:1.5},element:"water",energy:17,maxEnergy:17,abilities:["scratch","spark","splash","ice","heal"],spriteFront:"/assets/math-rpg/monsters/Finsta.png",spriteBack:"/assets/math-rpg/monsters/Finsta.png"},Gulfin:{id:"Gulfin",name:"Gulfin",level:9,hp:18,maxHp:18,stats:{attack:3,defense:10,speed:2,recovery:1.8},element:"water",energy:20,maxEnergy:20,abilities:["scratch","spark","splash","ice","heal"],spriteFront:"/assets/math-rpg/monsters/Gulfin.png",spriteBack:"/assets/math-rpg/monsters/Gulfin.png"},Finiette:{id:"Finiette",name:"Finiette",level:30,hp:27,maxHp:27,stats:{attack:4,defense:17,speed:2.5,recovery:2},element:"water",energy:23,maxEnergy:23,abilities:["scratch","spark","splash","ice","heal"],spriteFront:"/assets/math-rpg/monsters/Finiette.png",spriteBack:"/assets/math-rpg/monsters/Finiette.png"},Atrox:{id:"Atrox",name:"Atrox",level:15,hp:18,maxHp:18,stats:{attack:3,defense:10,speed:1.9,recovery:1.3},element:"fire",energy:20,maxEnergy:20,abilities:["scratch","spark","fire"],spriteFront:"/assets/math-rpg/monsters/Atrox.png",spriteBack:"/assets/math-rpg/monsters/Atrox.png"},Pouch:{id:"Pouch",name:"Pouch",level:15,hp:23,maxHp:23,stats:{attack:4,defense:12,speed:1.5,recovery:1},element:"plant",energy:25,maxEnergy:25,abilities:["scratch","spark","heal"],spriteFront:"/assets/math-rpg/monsters/Pouch.png",spriteBack:"/assets/math-rpg/monsters/Pouch.png"},Draem:{id:"Draem",name:"Draem",level:13,hp:23,maxHp:23,stats:{attack:4,defense:12,speed:1.4,recovery:1.2},element:"plant",energy:25,maxEnergy:25,abilities:["scratch","heal","explosion","splash"],spriteFront:"/assets/math-rpg/monsters/Draem.png",spriteBack:"/assets/math-rpg/monsters/Draem.png"},Larvea:{id:"Larvea",name:"Larvea",level:12,hp:15,maxHp:15,stats:{attack:1,defense:8,speed:1,recovery:1},element:"plant",energy:17,maxEnergy:17,abilities:["scratch","spark"],spriteFront:"/assets/math-rpg/monsters/Larvea.png",spriteBack:"/assets/math-rpg/monsters/Larvea.png"},Cleaf:{id:"Cleaf",name:"Cleaf",level:15,hp:18,maxHp:18,stats:{attack:3,defense:10,speed:1.6,recovery:1.7},element:"plant",energy:20,maxEnergy:20,abilities:["scratch","heal"],spriteFront:"/assets/math-rpg/monsters/Cleaf.png",spriteBack:"/assets/math-rpg/monsters/Cleaf.png"},Jacana:{id:"Jacana",name:"Jacana",level:10,hp:12,maxHp:12,stats:{attack:3,defense:10,speed:2.6,recovery:2.1},element:"fire",energy:19,maxEnergy:19,abilities:["scratch","spark","burn","explosion","heal"],spriteFront:"/assets/math-rpg/monsters/Jacana.png",spriteBack:"/assets/math-rpg/monsters/Jacana.png"},Friolera:{id:"Friolera",name:"Friolera",level:25,hp:13,maxHp:13,stats:{attack:4,defense:6,speed:2,recovery:1.3},element:"water",energy:20,maxEnergy:20,abilities:["scratch","spark","splash","ice","heal"],spriteFront:"/assets/math-rpg/monsters/Friolera.png",spriteBack:"/assets/math-rpg/monsters/Friolera.png"}};e.s(["default",0,()=>{let[e,r]=(0,a.useState)("MAP"),[s,i]=(0,a.useState)(n),[d,f]=(0,a.useState)({position:{x:25,y:35},direction:"UP",isMoving:!1}),[v,b]=(0,a.useState)(null),[k,w]=(0,a.useState)(null),[N,P]=(0,a.useState)({hasTracker:!1,cluesFound:{student:!1,clerk:!1,oldMan:!1},fogCleared:!1,gymUnlocked:!1}),[C,j]=(0,a.useState)(""),T=(0,a.useCallback)(t=>{"MAP"===e&&(f(e=>{let a={...e.position};switch(t){case"UP":a.y--;break;case"DOWN":a.y++;break;case"LEFT":a.x--;break;case"RIGHT":a.x++}if(a.x<0||a.x>=s.width||a.y<0||a.y>=s.height||2===s.tiles[a.y][a.x]||3===s.tiles[a.y][a.x])return{...e,direction:t};let r=s.events.find(e=>e.position.x===a.x&&e.position.y===a.y);return r&&"NPC"===r.type?{...e,direction:t}:(0===s.tiles[a.y][a.x]&&.15>Math.random()&&setTimeout(()=>A(),250),{...e,position:a,direction:t,isMoving:!0})}),setTimeout(()=>{f(e=>({...e,isMoving:!1}))},200))},[e,s]),E=()=>{if("DIALOG"===e){r("MAP"),b(null);return}if("INPUT"===e)return;let t={...d.position};switch(d.direction){case"UP":t.y--;break;case"DOWN":t.y++;break;case"LEFT":t.x--;break;case"RIGHT":t.x++}let a=s.events.find(e=>e.position.x===t.x&&e.position.y===t.y);if(a&&"ACTION"===a.trigger&&"NPC"===a.type){if(a.data.questUpdate){let e=a.data.questUpdate;"START"===e?P(e=>({...e,hasTracker:!0})):"CLUE_STUDENT"===e&&N.hasTracker?P(e=>({...e,cluesFound:{...e.cluesFound,student:!0}})):"CLUE_CLERK"===e&&N.hasTracker?P(e=>({...e,cluesFound:{...e.cluesFound,clerk:!0}})):"CLUE_OLDMAN"===e&&N.hasTracker&&P(e=>({...e,cluesFound:{...e.cluesFound,oldMan:!0}}))}if(a.data.isPuzzle)return void(N.fogCleared?(b(["The Prime Regulator is running smoothly."]),r("DIALOG")):(b(a.data.dialog),r("INPUT"),j("")));if(a.data.checkGymLock){N.gymUnlocked?b(["The Gym is open! Good luck!"]):b(a.data.dialog),r("DIALOG");return}b(a.data.dialog),r("DIALOG")}},A=()=>{let e={...x.Ivieron},t=Object.keys(x),a={...x[t[Math.floor(Math.random()*t.length)]]};e.id=`p_${Date.now()}`,a.id=`e_${Date.now()}`,w({playerPokemon:e,enemyPokemon:a,turn:"PLAYER",message:`A wild ${a.name} appeared!`,phase:"INTRO"}),r("BATTLE"),setTimeout(()=>{w(t=>t?{...t,phase:"MENU",message:`What will ${e.name} do?`}:null)},2e3)},M=async e=>{if(!k)return;w(t=>t?{...t,message:"Loading question...",selectedAttack:e}:null);let t=await y();t?w(e=>e?{...e,phase:"QUESTION",message:"Solve the problem to attack!",currentQuestion:{text:t.text,answer:t.answer}}:null):w(e=>e?{...e,phase:"QUESTION",message:"Solve: 5 + 7 = ?",currentQuestion:{text:"5 + 7 = ?",answer:"12"}}:null)};return(0,a.useEffect)(()=>{let t=t=>{if("MAP"===e)switch(t.key){case"ArrowUp":T("UP");break;case"ArrowDown":T("DOWN");break;case"ArrowLeft":T("LEFT");break;case"ArrowRight":T("RIGHT");break;case"z":case"Enter":E()}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[T,e,d]),(0,t.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center bg-slate-900 p-4",children:[(0,t.jsx)("div",{className:"relative w-[960px] h-[704px] overflow-hidden bg-black border-4 border-slate-700 rounded-lg shadow-2xl",children:"MAP"===e||"DIALOG"===e||"INPUT"===e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o,{map:s,playerPos:d.position,playerDir:d.direction,isMoving:d.isMoving}),("DIALOG"===e||"INPUT"===e)&&v&&(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-white border-t-4 border-blue-800 p-4 z-10 min-h-[100px]",children:[(0,t.jsx)("p",{className:"text-lg font-mono mb-2 text-black",children:v[0]}),"DIALOG"===e&&(0,t.jsx)(l.Button,{size:"sm",onClick:()=>{v.length>1?b(v.slice(1)):(r("MAP"),b(null))},children:"Next"}),"INPUT"===e&&1===v.length&&(0,t.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,t.jsx)("input",{type:"text",value:C,onChange:e=>j(e.target.value),className:"border-2 border-black p-1 font-mono text-black",placeholder:"Enter number...",autoFocus:!0}),(0,t.jsx)(l.Button,{onClick:()=>{"39"===C?(P(e=>({...e,fogCleared:!0,gymUnlocked:!0})),b(["CORRECT VARIABLE DETECTED.","Logic Fog clearing...","Gym Unlocked!"])):b(["INCORRECT VARIABLE.","Calculation Error."]),r("DIALOG")},children:"Submit"}),(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>{r("MAP"),b(null)},children:"Cancel"})]}),"INPUT"===e&&v.length>1&&(0,t.jsx)(l.Button,{size:"sm",onClick:()=>b(v.slice(1)),children:"Next"})]})]}):"BATTLE"===e&&k?(0,t.jsx)(m,{battleState:k,onAttack:M,onRun:()=>{w(e=>e?{...e,message:"Got away safely!"}:null),setTimeout(()=>{r("MAP"),w(null)},1e3)},onAnswer:e=>{if(!k||!k.currentQuestion||!k.selectedAttack)return;let t=e.trim().toLowerCase()===k.currentQuestion.answer.trim().toLowerCase(),a=c[k.selectedAttack],s=k.playerPokemon,n=k.enemyPokemon;t?(w(e=>e?{...e,phase:"ATTACK",message:`Correct! ${s.name} used ${a.name.toUpperCase()}!`}:null),setTimeout(()=>{w(e=>{if(!e)return null;let t=10*a.amount,o=Math.floor((2*s.level/5+2)*t*s.stats.attack/n.stats.defense/50+2),l=Math.max(0,e.enemyPokemon.hp-o),i=Math.max(0,e.playerPokemon.energy-a.cost),m={...e.playerPokemon,energy:i};return 0===l?(setTimeout(()=>{r("MAP"),w(null)},2e3),{...e,playerPokemon:m,enemyPokemon:{...e.enemyPokemon,hp:0},phase:"RESULT",message:`Wild ${e.enemyPokemon.name} fainted!`}):(setTimeout(()=>{w(e=>{if(!e)return null;let t=e.enemyPokemon.abilities[Math.floor(Math.random()*e.enemyPokemon.abilities.length)],a=10*(c[t]||c.scratch).amount,r=Math.floor((2*e.enemyPokemon.level/5+2)*a*e.enemyPokemon.stats.attack/e.playerPokemon.stats.defense/50+2),s=Math.max(0,e.playerPokemon.hp-r);return{...e,playerPokemon:{...e.playerPokemon,hp:s},turn:"PLAYER",phase:"MENU",message:`Wild ${e.enemyPokemon.name} used ${t.toUpperCase()}! (Dm: ${r})`}})},2e3),{...e,playerPokemon:m,enemyPokemon:{...e.enemyPokemon,hp:l},turn:"ENEMY",phase:"ATTACK",message:`It dealt ${o} damage!`})})},1e3)):(w(e=>e?{...e,phase:"ATTACK",message:"Wrong! You missed!"}:null),setTimeout(()=>{w(e=>e?(setTimeout(()=>{w(e=>{if(!e)return null;let t=e.enemyPokemon.abilities[Math.floor(Math.random()*e.enemyPokemon.abilities.length)],a=10*(c[t]||c.scratch).amount,r=Math.floor((2*e.enemyPokemon.level/5+2)*a*e.enemyPokemon.stats.attack/e.playerPokemon.stats.defense/50+2),s=Math.max(0,e.playerPokemon.hp-r);return{...e,playerPokemon:{...e.playerPokemon,hp:s},turn:"PLAYER",phase:"MENU",message:`Wild ${e.enemyPokemon.name} used ${t.toUpperCase()}! (Dm: ${r})`}})},2e3),{...e,turn:"ENEMY",phase:"ATTACK",message:"Math error! execution failed."}):null)},1e3))}}):null}),(0,t.jsxs)("div",{className:"absolute bottom-8 right-8 grid grid-cols-3 gap-2 md:hidden",children:[(0,t.jsx)("div",{}),(0,t.jsx)(l.Button,{variant:"secondary",onClick:()=>T("UP"),children:(0,t.jsx)(p,{})}),(0,t.jsx)("div",{}),(0,t.jsx)(l.Button,{variant:"secondary",onClick:()=>T("LEFT"),children:(0,t.jsx)(h.ArrowLeft,{})}),(0,t.jsx)(l.Button,{variant:"destructive",onClick:E,className:"rounded-full w-12 h-12",children:"A"}),(0,t.jsx)(l.Button,{variant:"secondary",onClick:()=>T("RIGHT"),children:(0,t.jsx)(g.ArrowRight,{})}),(0,t.jsx)("div",{}),(0,t.jsx)(l.Button,{variant:"secondary",onClick:()=>T("DOWN"),children:(0,t.jsx)(u,{})}),(0,t.jsx)("div",{})]})]})}],51778)}]);