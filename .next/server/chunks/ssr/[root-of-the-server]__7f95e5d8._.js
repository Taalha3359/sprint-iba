module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},99570,11011,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(70121),e=Symbol.for("react.lazy"),f=c[" use ".trim().toString()];function g(a){var b;return null!=a&&"object"==typeof a&&"$$typeof"in a&&a.$$typeof===e&&"_payload"in a&&"object"==typeof(b=a._payload)&&null!==b&&"then"in b}function h(a){var e;let h,i=(e=a,(h=c.forwardRef((a,b)=>{let{children:e,...h}=a;if(g(e)&&"function"==typeof f&&(e=f(e._payload)),c.isValidElement(e)){var i;let a,f,g=(i=e,(f=(a=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?i.ref:(f=(a=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?i.props.ref:i.props.ref||i.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(h,e.props);return e.type!==c.Fragment&&(j.ref=b?(0,d.composeRefs)(b,g):g),c.cloneElement(e,j)}return c.Children.count(e)>1?c.Children.only(null):null})).displayName=`${e}.SlotClone`,h),j=c.forwardRef((a,d)=>{let{children:e,...h}=a;g(e)&&"function"==typeof f&&(e=f(e._payload));let j=c.Children.toArray(e),l=j.find(k);if(l){let a=l.props.children,e=j.map(b=>b!==l?b:c.Children.count(a)>1?c.Children.only(null):c.isValidElement(a)?a.props.children:null);return(0,b.jsx)(i,{...h,ref:d,children:c.isValidElement(a)?c.cloneElement(a,void 0,e):null})}return(0,b.jsx)(i,{...h,ref:d,children:e})});return j.displayName=`${a}.Slot`,j}var i=h("Slot"),j=Symbol("radix.slottable");function k(a){return c.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===j}a.s(["Slot",()=>i,"createSlot",()=>h],11011);var l=a.i(187),m=a.i(68114);let n=(0,l.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=c.forwardRef(({className:a,variant:c,size:d,asChild:e=!1,...f},g)=>(0,b.jsx)(e?i:"button",{className:(0,m.cn)(n({variant:c,size:d,className:a})),ref:g,...f}));o.displayName="Button",a.s(["Button",()=>o,"buttonVariants",()=>n],99570)},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},70430,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(11011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(187),h=a.i(68114);let i=(0,g.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(f,{ref:d,className:(0,h.cn)(i(),a),...c}));j.displayName=f.displayName,a.s(["Label",()=>j],70430)},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},434,a=>{"use strict";var b=a.i(87924),c=a.i(11642),d=a.i(72131),e=a.i(74167),f=a.i(96221),g=a.i(50944);a.s(["OperatorRoute",0,({children:a})=>{let{user:h,loading:i}=(0,c.useAuth)(),[j,k]=(0,d.useState)(null),[l,m]=(0,d.useState)(!0),n=(0,g.useRouter)();return((0,d.useEffect)(()=>{let a=async()=>{if(!h)return void m(!1);try{let{data:a,error:b}=await e.supabase.from("profiles").select("role").eq("id",h.id).single();b?(console.error("Error checking role:",b),k(!1)):k(a?.role==="operator")}catch(a){console.error("Exception checking role:",a),k(!1)}finally{m(!1)}};i||a()},[h,i]),(0,d.useEffect)(()=>{i||h||n.push("/operator/login")},[h,i,l,j,n]),i||l)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)(f.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):h?j?(0,b.jsx)(b.Fragment,{children:a}):(0,b.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center space-y-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-red-500",children:"Access Denied"}),(0,b.jsx)("p",{children:"You do not have operator privileges."}),(0,b.jsx)("button",{onClick:()=>n.push("/"),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Go Home"})]}):null}])},77642,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(99570),f=a.i(91119),g=a.i(210);let h=(0,a.i(70106).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var i=a.i(96221),j=a.i(74167),k=a.i(23292),l=a.i(70430),m=a.i(434);let n=()=>{let a=(0,d.useParams)().id,m=(0,d.useRouter)(),n=!a||"new"===a,[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!n),[s,t]=(0,c.useState)({question_text:"",options:["","","","",""],correct_answer:"",explanation:"",difficulty:"Easy",subtopic:"",topic:"",image_url:""});(0,c.useEffect)(()=>{!n&&a&&u(a)},[a,n]);let u=async a=>{try{let{data:b,error:c}=await j.supabase.from("questions").select("*").eq("id",a).single();if(c)throw c;if(b){let a=Array.isArray(b.options)?b.options.map(a=>"object"==typeof a&&null!==a?a.text||"":String(a)):["","","","",""];for(;a.length<5;)a.push("");t({question_text:b.question_text||"",options:a,correct_answer:b.correct_answer||"",explanation:b.explanation||"",difficulty:b.difficulty||"Easy",subtopic:b.subtopic||"",topic:b.topic||"",image_url:b.image_url||""})}}catch(a){k.toast.error("Failed to fetch question"),console.error(a)}finally{r(!1)}},v=async()=>{p(!0);try{let b;if(!s.question_text)throw Error("Question text is required");if(!s.correct_answer)throw Error("Correct answer is required");if(!s.topic)throw Error("Topic is required");if(!s.subtopic)throw Error("Subtopic is required");let c=s.options.map((a,b)=>({id:String.fromCharCode(65+b),text:a})),d={question_text:s.question_text,options:c,correct_answer:s.correct_answer,explanation:s.explanation,difficulty:s.difficulty,subtopic:s.subtopic,topic:s.topic,image_url:s.image_url||null};if(n){let{error:a}=await j.supabase.from("questions").insert(d);b=a}else{let{error:c}=await j.supabase.from("questions").update(d).eq("id",a);b=c}if(b)throw b;k.toast.success(n?"Question created":"Question updated"),m.push("/operator/dashboard")}catch(a){k.toast.error(a.message||"Failed to save question"),console.error(a)}finally{p(!1)}};return q?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)(i.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):(0,b.jsx)("div",{className:"min-h-screen bg-background p-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>m.push("/operator/dashboard"),children:(0,b.jsx)(g.ArrowLeft,{className:"w-6 h-6"})}),(0,b.jsx)("h1",{className:"text-3xl font-bold",children:n?"Create Question":"Edit Question"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Question Details"})}),(0,b.jsxs)(f.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Question Text (LaTeX supported)"}),(0,b.jsx)("textarea",{value:s.question_text,onChange:a=>t({...s,question_text:a.target.value}),placeholder:"Enter question text...",className:"w-full p-2 border rounded min-h-[150px] bg-background"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Image URL (Optional)"}),(0,b.jsx)("input",{type:"text",value:s.image_url,onChange:a=>t({...s,image_url:a.target.value}),placeholder:"/questions/image.png",className:"w-full p-2 border rounded bg-background"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(l.Label,{children:"Options"}),s.options.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-6 font-bold",children:String.fromCharCode(65+c)}),(0,b.jsx)("input",{type:"text",value:a,onChange:a=>{var b;let d;return b=a.target.value,void((d=[...s.options])[c]=b,t({...s,options:d}))},placeholder:`Option ${String.fromCharCode(65+c)}`,className:"w-full p-2 border rounded bg-background"})]},c))]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Correct Answer"}),(0,b.jsxs)("select",{value:s.correct_answer,onChange:a=>t({...s,correct_answer:a.target.value}),className:"w-full p-2 border rounded bg-background",children:[(0,b.jsx)("option",{value:"",children:"Select Answer"}),s.options.map((a,c)=>(0,b.jsx)("option",{value:String.fromCharCode(65+c),children:String.fromCharCode(65+c)},c))]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Difficulty"}),(0,b.jsxs)("select",{value:s.difficulty,onChange:a=>t({...s,difficulty:a.target.value}),className:"w-full p-2 border rounded bg-background",children:[(0,b.jsx)("option",{value:"Easy",children:"Easy"}),(0,b.jsx)("option",{value:"Medium",children:"Medium"}),(0,b.jsx)("option",{value:"Hard",children:"Hard"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Topic"}),(0,b.jsx)("input",{type:"text",value:s.topic,onChange:a=>t({...s,topic:a.target.value}),placeholder:"Topic",className:"w-full p-2 border rounded bg-background"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Subtopic (Unit)"}),(0,b.jsx)("input",{type:"text",value:s.subtopic,onChange:a=>t({...s,subtopic:a.target.value}),placeholder:"Subtopic",className:"w-full p-2 border rounded bg-background"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Explanation"}),(0,b.jsx)("textarea",{value:s.explanation,onChange:a=>t({...s,explanation:a.target.value}),placeholder:"Explain the solution...",className:"w-full p-2 border rounded min-h-[100px] bg-background"})]}),(0,b.jsxs)(e.Button,{className:"w-full",onClick:v,disabled:o,children:[o&&(0,b.jsx)(i.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),(0,b.jsx)(h,{className:"w-4 h-4 mr-2"}),"Save Question"]})]})]}),(0,b.jsxs)(f.Card,{className:"h-fit sticky top-8",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Preview"})}),(0,b.jsx)(f.CardContent,{className:"space-y-6",children:(0,b.jsxs)("div",{className:"prose dark:prose-invert max-w-none",children:[(0,b.jsx)("div",{className:"text-lg font-medium",children:s.question_text||"Question text will appear here..."}),s.image_url&&(0,b.jsx)("div",{className:"my-4",children:(0,b.jsx)("img",{src:s.image_url,alt:"Question Diagram",className:"max-w-full h-auto rounded-lg border",onError:a=>{a.target.style.display="none"}})}),(0,b.jsx)("div",{className:"space-y-2 mt-4",children:s.options.map((a,c)=>(0,b.jsxs)("div",{className:`p-3 rounded-lg border ${s.correct_answer===String.fromCharCode(65+c)?"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800":"bg-card"}`,children:[(0,b.jsxs)("span",{className:"font-bold mr-2",children:[String.fromCharCode(65+c),"."]}),a||"Option text..."]},c))}),s.explanation&&(0,b.jsxs)("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:[(0,b.jsx)("h4",{className:"font-bold mb-2",children:"Explanation:"}),s.explanation]})]})})]})]})]})})};a.s(["default",0,()=>(0,b.jsx)(m.OperatorRoute,{children:(0,b.jsx)(n,{})})],77642)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7f95e5d8._.js.map