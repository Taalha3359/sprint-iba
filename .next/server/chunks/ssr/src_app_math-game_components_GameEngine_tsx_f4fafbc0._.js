module.exports=[39559,a=>{"use strict";var b=a.i(87924),c=a.i(72131);console.log("Map Data Loaded: "+Date.now());let d=Array(40).fill(null).map(()=>Array(50).fill(0));for(let a=0;a<40;a++)for(let b=0;b<50;b++)(b<2||b>47||a<2||a>37)&&(d[a][b]=160);for(let a=2;a<48;a++)d[15][a]=25,d[16][a]=25,d[25][a]=25,d[26][a]=25;for(let a=2;a<38;a++)d[a][12]=25,d[a][13]=25,d[a][28]=25,d[a][29]=25;let e=(a,b,c,e,f,g,h)=>{for(let g=b;g<b+e-2;g++)for(let e=a;e<a+c;e++)d[g][e]=f+(e-a)+(g-b)*8;for(let f=b+e-2;f<b+e;f++)for(let b=a;b<a+c;b++)d[f][b]=g;d[b+e-1][a+h]=1779,c>3&&(d[b+e-2][a+1]=1685,d[b+e-2][a+c-2]=1685)};e(8,6,4,4,1584,1684,2),e(14,6,4,4,1628,1684,2),e(35,10,6,5,1584,1834,3),e(32,6,4,4,1976,1684,1),e(32,28,4,4,1976,1684,1),e(8,28,4,4,1976,1684,1),e(18,18,6,5,1628,1834,3);for(let a=6;a<12;a++)d[a][6]=72;d[18][10]=16,d[18][11]=16,d[19][10]=16,d[19][11]=16;let f={id:"numbers_town",width:50,height:40,tiles:d,events:[{id:"prof_logic",position:{x:21,y:24},type:"NPC",trigger:"ACTION",data:{name:"Professor Logic",sprite:"/assets/math-rpg/characters/blond.png",dialog:["Welcome to Numbers Town!","We are in a state of Statistical Chaos.","The Logic Fog has jammed the Prime Regulator.","Here, take this Variable Tracker.","Interview the residents to find the missing data points."],questUpdate:"START"}},{id:"student",position:{x:10,y:33},type:"NPC",trigger:"ACTION",data:{name:"Student",sprite:"/assets/math-rpg/characters/young_guy.png",dialog:["I can't finish my homework!","My records are incomplete...","The average temperature for Wednesday, Thursday, and Friday was 40°C."],questUpdate:"CLUE_STUDENT"}},{id:"clerk",position:{x:16,y:11},type:"NPC",trigger:"ACTION",data:{name:"Clerk",sprite:"/assets/math-rpg/characters/hat_girl.png",dialog:["The warehouse readings are weird.","The system says the average for Thursday, Friday, and Saturday was 41°C."],questUpdate:"CLUE_CLERK"}},{id:"old_man",position:{x:39,y:17},type:"NPC",trigger:"ACTION",data:{name:"Old Man",sprite:"/assets/math-rpg/characters/straw.png",dialog:["It was so hot before the fog rolled in!","I checked the thermometer myself...","Saturday was a scorching 42°C!"],questUpdate:"CLUE_OLDMAN"}},{id:"fountain",position:{x:21,y:16},type:"NPC",trigger:"ACTION",data:{name:"Prime Regulator",sprite:"",dialog:["The Prime Regulator is humming...","ENTER THE TRUE VARIABLE FOR WEDNESDAY."],isPuzzle:!0}},{id:"gym_door",position:{x:39,y:15},type:"NPC",trigger:"ACTION",data:{name:"Gym Door",sprite:"",dialog:["The door is locked.","A sign reads: 'Gym Closed due to Logic Fog.'"],checkGymLock:!0}},{id:"town_guide",position:{x:12,y:18},type:"NPC",trigger:"ACTION",data:{name:"Town Guide",sprite:"/assets/math-rpg/characters/young_girl.png",dialog:["Numbers Town is known for its precision.","Don't step on the grass if you don't want to calculate!"]}},{id:"kid_1",position:{x:32,y:33},type:"NPC",trigger:"ACTION",data:{name:"Kid",sprite:"/assets/math-rpg/characters/young_guy.png",dialog:["My Pidgey has higher Speed stats than yours!"]}}]},g=({map:a,playerPos:d,playerDir:e,isMoving:f})=>{let g=(0,c.useRef)(null),h=(0,c.useRef)(new Image),i=(0,c.useRef)(new Image),j=(0,c.useRef)({}),[k,l]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let b=()=>{h.current.complete&&i.current.complete&&l(!0)};h.current.onload=()=>{b()},i.current.onload=()=>{b()},h.current.src="/assets/math-rpg/tilesets/world.png",i.current.src="/assets/math-rpg/characters/player.png",a.events.forEach(a=>{if("NPC"===a.type&&a.data?.sprite){let b=a.data.sprite;if(!j.current[b]){let a=new Image;a.onload=()=>{},a.onerror=()=>console.error(`NPC Error: ${b}`),a.src=b,j.current[b]=a}}}),h.current.complete&&i.current.complete&&l(!0)},[a]),(0,c.useEffect)(()=>{let b=g.current;if(!b)return;let c=b.getContext("2d");if(!c)return;c.imageSmoothingEnabled=!1,c.fillStyle="#000",c.fillRect(0,0,b.width,b.height);let h=Math.max(0,Math.min(a.width-15,d.x-Math.floor(7.5))),k=Math.max(0,Math.min(a.height-11,d.y-Math.floor(5.5)));c.save(),c.scale(2,2);for(let b=0;b<11;b++)for(let d=0;d<15;d++){let e=h+d,f=k+b;if(e>=0&&e<a.width&&f>=0&&f<a.height){let g=a.tiles[f][e];m(c,0,32*d,32*b),0!==g&&m(c,g,32*d,32*b)}}a.events.forEach(a=>{if("NPC"===a.type){let b=(a.position.x-h)*32,d=(a.position.y-k)*32;if(b>=-32&&b<480&&d>=-32&&d<352){let e=a.data?.sprite,f=e?j.current[e]:null;f&&f.complete&&f.naturalWidth>0?n(c,f,b,d,"DOWN",!1):n(c,i.current,b,d,"DOWN",!1)}}});let l=(d.x-h)*32,o=(d.y-k)*32;n(c,i.current,l,o,e,f),c.restore()},[a,d,e,f,k]);let m=(a,b,c,d)=>{let e=32*Math.floor(b/8);h.current.complete&&h.current.naturalWidth>0?a.drawImage(h.current,b%8*32,e,32,32,c,d,32,32):(a.fillStyle="#4ade80",a.fillRect(c,d,32,32))},n=(a,b,c,d,e,f)=>{let g=0;switch(e){case"DOWN":g=0;break;case"LEFT":g=1;break;case"RIGHT":g=2;break;case"UP":g=3}let h=f?Math.floor(Date.now()/200)%4:0;b&&b.complete&&b.naturalWidth>0?a.drawImage(b,32*h,48*g,32,48,c,d-16,32,48):(a.fillStyle="red",a.fillRect(c,d,32,32))};return(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)("canvas",{ref:g,width:960,height:704,className:"border-4 border-slate-700 rounded-lg shadow-2xl bg-black"})})};var h=a.i(99570),i=a.i(73390);let j={burn:{target:"opponent",amount:2,cost:15,element:"fire",animation:"fire"},heal:{target:"player",amount:-1.2,cost:600,element:"plant",animation:"green"},battlecry:{target:"player",amount:-1.4,cost:20,element:"normal",animation:"green"},spark:{target:"opponent",amount:1.1,cost:20,element:"fire",animation:"fire"},scratch:{target:"opponent",amount:1.2,cost:20,element:"normal",animation:"scratch"},splash:{target:"opponent",amount:2,cost:15,element:"water",animation:"splash"},fire:{target:"opponent",amount:2,cost:15,element:"fire",animation:"fire"},explosion:{target:"opponent",amount:2,cost:90,element:"fire",animation:"explosion"},annihilate:{target:"opponent",amount:3,cost:30,element:"fire",animation:"explosion"},ice:{target:"opponent",amount:2,cost:15,element:"water",animation:"ice"}},k=({battleState:a,onAttack:d,onRun:e,onAnswer:f})=>{let{playerPokemon:g,enemyPokemon:k,message:l,phase:m}=a,[n,o]=(0,c.useState)("");return(0,b.jsxs)("div",{className:"relative w-full h-full bg-slate-800 flex items-center justify-center overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 z-0",children:(0,b.jsx)("img",{src:"/assets/pokemon/Battlebacks/field_bg.png",className:"w-full h-full object-cover",alt:"Battle Background"})}),(0,b.jsx)("div",{className:"absolute bottom-10 left-10 z-10",children:(0,b.jsx)("img",{src:"/assets/pokemon/Battlebacks/field_base0.png",className:"w-64",alt:"Player Base"})}),(0,b.jsx)("div",{className:"absolute top-20 right-10 z-10",children:(0,b.jsx)("img",{src:"/assets/pokemon/Battlebacks/field_base1.png",className:"w-64",alt:"Enemy Base"})}),(0,b.jsx)("div",{className:"absolute bottom-20 left-20 z-20 animate-bounce-slow",children:(0,b.jsx)("img",{src:g.spriteBack,className:"w-48 h-48 object-contain pixelated",alt:g.name})}),(0,b.jsx)("div",{className:"absolute top-24 right-24 z-20 animate-float",children:(0,b.jsx)("img",{src:k.spriteFront,className:"w-40 h-40 object-contain pixelated",alt:k.name})}),(0,b.jsxs)("div",{className:"absolute top-10 left-10 bg-white/90 p-4 rounded-lg shadow-lg border-2 border-slate-600 z-30 w-64",children:[(0,b.jsxs)("h3",{className:"font-bold text-lg flex justify-between",children:[k.name,(0,b.jsxs)("span",{className:"text-sm text-slate-500",children:["Lv",k.level]})]}),(0,b.jsx)(i.Progress,{value:k.hp/k.maxHp*100,className:"h-2 mt-2 bg-slate-200 [&>div]:bg-red-500"})]}),(0,b.jsxs)("div",{className:"absolute bottom-32 right-10 bg-white/90 p-4 rounded-lg shadow-lg border-2 border-slate-600 z-30 w-64",children:[(0,b.jsxs)("h3",{className:"font-bold text-lg flex justify-between",children:[g.name,(0,b.jsxs)("span",{className:"text-sm text-slate-500",children:["Lv",g.level]})]}),(0,b.jsx)(i.Progress,{value:g.hp/g.maxHp*100,className:"h-2 mt-2 bg-slate-200 [&>div]:bg-green-500"}),(0,b.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,b.jsxs)("p",{className:"text-sm font-mono text-slate-600",children:["HP: ",g.hp.toFixed(0),"/",g.maxHp]}),(0,b.jsxs)("p",{className:"text-xs font-mono text-blue-600",children:["NRG: ",g.energy.toFixed(0)]})]})]}),(0,b.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-slate-900/90 border-t-4 border-slate-600 p-4 z-40 flex gap-4",children:[(0,b.jsx)("div",{className:"flex-1 bg-slate-800 rounded p-4 border-2 border-slate-600 text-white text-xl font-mono",children:"QUESTION"===m&&a.currentQuestion?(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"mb-2",children:["Solve: ",a.currentQuestion.text]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),f(n),o("")},className:"flex gap-2",children:[(0,b.jsx)("input",{autoFocus:!0,type:"text",value:n,onChange:a=>o(a.target.value),className:"bg-slate-700 border border-slate-500 rounded px-2 py-1 text-white w-32"}),(0,b.jsx)(h.Button,{type:"submit",size:"sm",children:"Submit"})]})]}):(0,b.jsx)("p",{children:l})}),"MENU"===m&&(0,b.jsxs)("div",{className:"w-80 grid grid-cols-2 gap-2 overflow-y-auto",children:[g.abilities.map(a=>{let c=j[a],e=c?c.cost:0,f=c?c.element:"normal",i="bg-slate-600 hover:bg-slate-700";return"fire"===f&&(i="bg-red-600 hover:bg-red-700"),"water"===f&&(i="bg-blue-600 hover:bg-blue-700"),"plant"===f&&(i="bg-green-600 hover:bg-green-700"),(0,b.jsxs)(h.Button,{onClick:()=>d(a),className:`${i} text-white font-bold text-xs uppercase flex justify-between`,disabled:g.energy<e,children:[(0,b.jsx)("span",{children:a}),(0,b.jsxs)("span",{className:"text-[10px] opacity-75",children:[e," E"]})]},a)}),(0,b.jsx)(h.Button,{onClick:e,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold text-xs",children:"RUN"})]})]})]})};var l=a.i(70106);let m=(0,l.default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),n=(0,l.default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var o=a.i(210),p=a.i(32860),q=a.i(74167);let r=async()=>{try{let{data:a,error:b}=await q.supabase.from("questions").select("id, question_text, correct_answer").eq("topic","Math").limit(20);if(b)return console.error("Error fetching questions:",b),null;if(a&&a.length>0){let b=Math.floor(Math.random()*a.length),c=a[b];return{id:c.id,text:c.question_text,answer:c.correct_answer}}return null}catch(a){return console.error("Exception fetching questions:",a),null}},s={Plumette:{id:"Plumette",name:"Plumette",level:5,hp:15,maxHp:15,stats:{attack:4,defense:8,speed:1,recovery:1},element:"plant",energy:17,maxEnergy:17,abilities:["scratch","spark"],spriteFront:"/assets/math-rpg/monsters/Plumette.png",spriteBack:"/assets/math-rpg/monsters/Plumette.png"},Ivieron:{id:"Ivieron",name:"Ivieron",level:32,hp:18,maxHp:18,stats:{attack:5,defense:10,speed:1.2,recovery:1.2},element:"plant",energy:20,maxEnergy:20,abilities:["scratch","spark"],spriteFront:"/assets/math-rpg/monsters/Ivieron.png",spriteBack:"/assets/math-rpg/monsters/Ivieron.png"},Pluma:{id:"Pluma",name:"Pluma",level:35,hp:23,maxHp:23,stats:{attack:6,defense:12,speed:1.8,recovery:1.8},element:"plant",energy:26,maxEnergy:26,abilities:["scratch","spark"],spriteFront:"/assets/math-rpg/monsters/Pluma.png",spriteBack:"/assets/math-rpg/monsters/Pluma.png"},Sparchu:{id:"Sparchu",name:"Sparchu",level:11,hp:15,maxHp:15,stats:{attack:3,defense:8,speed:1,recovery:1.1},element:"fire",energy:7,maxEnergy:7,abilities:["scratch","fire","battlecry","explosion"],spriteFront:"/assets/math-rpg/monsters/Sparchu.png",spriteBack:"/assets/math-rpg/monsters/Sparchu.png"},Cindrill:{id:"Cindrill",name:"Cindrill",level:16,hp:18,maxHp:18,stats:{attack:3.5,defense:10,speed:1.1,recovery:1.2},element:"fire",energy:10,maxEnergy:10,abilities:["scratch","fire","battlecry","explosion"],spriteFront:"/assets/math-rpg/monsters/Cindrill.png",spriteBack:"/assets/math-rpg/monsters/Cindrill.png"},Charmadillo:{id:"Charmadillo",name:"Charmadillo",level:33,hp:29,maxHp:29,stats:{attack:4,defense:17,speed:1.1,recovery:1.35},element:"fire",energy:12,maxEnergy:12,abilities:["scratch","fire","battlecry","explosion","annihilate"],spriteFront:"/assets/math-rpg/monsters/Charmadillo.png",spriteBack:"/assets/math-rpg/monsters/Charmadillo.png"},Finsta:{id:"Finsta",name:"Finsta",level:15,hp:13,maxHp:13,stats:{attack:2,defense:8,speed:1.8,recovery:1.5},element:"water",energy:17,maxEnergy:17,abilities:["scratch","spark","splash","ice","heal"],spriteFront:"/assets/math-rpg/monsters/Finsta.png",spriteBack:"/assets/math-rpg/monsters/Finsta.png"},Gulfin:{id:"Gulfin",name:"Gulfin",level:9,hp:18,maxHp:18,stats:{attack:3,defense:10,speed:2,recovery:1.8},element:"water",energy:20,maxEnergy:20,abilities:["scratch","spark","splash","ice","heal"],spriteFront:"/assets/math-rpg/monsters/Gulfin.png",spriteBack:"/assets/math-rpg/monsters/Gulfin.png"},Finiette:{id:"Finiette",name:"Finiette",level:30,hp:27,maxHp:27,stats:{attack:4,defense:17,speed:2.5,recovery:2},element:"water",energy:23,maxEnergy:23,abilities:["scratch","spark","splash","ice","heal"],spriteFront:"/assets/math-rpg/monsters/Finiette.png",spriteBack:"/assets/math-rpg/monsters/Finiette.png"},Atrox:{id:"Atrox",name:"Atrox",level:15,hp:18,maxHp:18,stats:{attack:3,defense:10,speed:1.9,recovery:1.3},element:"fire",energy:20,maxEnergy:20,abilities:["scratch","spark","fire"],spriteFront:"/assets/math-rpg/monsters/Atrox.png",spriteBack:"/assets/math-rpg/monsters/Atrox.png"},Pouch:{id:"Pouch",name:"Pouch",level:15,hp:23,maxHp:23,stats:{attack:4,defense:12,speed:1.5,recovery:1},element:"plant",energy:25,maxEnergy:25,abilities:["scratch","spark","heal"],spriteFront:"/assets/math-rpg/monsters/Pouch.png",spriteBack:"/assets/math-rpg/monsters/Pouch.png"},Draem:{id:"Draem",name:"Draem",level:13,hp:23,maxHp:23,stats:{attack:4,defense:12,speed:1.4,recovery:1.2},element:"plant",energy:25,maxEnergy:25,abilities:["scratch","heal","explosion","splash"],spriteFront:"/assets/math-rpg/monsters/Draem.png",spriteBack:"/assets/math-rpg/monsters/Draem.png"},Larvea:{id:"Larvea",name:"Larvea",level:12,hp:15,maxHp:15,stats:{attack:1,defense:8,speed:1,recovery:1},element:"plant",energy:17,maxEnergy:17,abilities:["scratch","spark"],spriteFront:"/assets/math-rpg/monsters/Larvea.png",spriteBack:"/assets/math-rpg/monsters/Larvea.png"},Cleaf:{id:"Cleaf",name:"Cleaf",level:15,hp:18,maxHp:18,stats:{attack:3,defense:10,speed:1.6,recovery:1.7},element:"plant",energy:20,maxEnergy:20,abilities:["scratch","heal"],spriteFront:"/assets/math-rpg/monsters/Cleaf.png",spriteBack:"/assets/math-rpg/monsters/Cleaf.png"},Jacana:{id:"Jacana",name:"Jacana",level:10,hp:12,maxHp:12,stats:{attack:3,defense:10,speed:2.6,recovery:2.1},element:"fire",energy:19,maxEnergy:19,abilities:["scratch","spark","burn","explosion","heal"],spriteFront:"/assets/math-rpg/monsters/Jacana.png",spriteBack:"/assets/math-rpg/monsters/Jacana.png"},Friolera:{id:"Friolera",name:"Friolera",level:25,hp:13,maxHp:13,stats:{attack:4,defense:6,speed:2,recovery:1.3},element:"water",energy:20,maxEnergy:20,abilities:["scratch","spark","splash","ice","heal"],spriteFront:"/assets/math-rpg/monsters/Friolera.png",spriteBack:"/assets/math-rpg/monsters/Friolera.png"}};a.s(["default",0,()=>{let[a,d]=(0,c.useState)("MAP"),[e,i]=(0,c.useState)(f),[l,q]=(0,c.useState)({position:{x:25,y:35},direction:"UP",isMoving:!1}),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)({hasTracker:!1,cluesFound:{student:!1,clerk:!1,oldMan:!1},fogCleared:!1,gymUnlocked:!1}),[z,A]=(0,c.useState)(""),B=(0,c.useCallback)(b=>{"MAP"===a&&(q(a=>{let c={...a.position};switch(b){case"UP":c.y--;break;case"DOWN":c.y++;break;case"LEFT":c.x--;break;case"RIGHT":c.x++}if(c.x<0||c.x>=e.width||c.y<0||c.y>=e.height||2===e.tiles[c.y][c.x]||3===e.tiles[c.y][c.x])return{...a,direction:b};let d=e.events.find(a=>a.position.x===c.x&&a.position.y===c.y);return d&&"NPC"===d.type?{...a,direction:b}:(0===e.tiles[c.y][c.x]&&.15>Math.random()&&setTimeout(()=>D(),250),{...a,position:c,direction:b,isMoving:!0})}),setTimeout(()=>{q(a=>({...a,isMoving:!1}))},200))},[a,e]),C=()=>{if("DIALOG"===a){d("MAP"),u(null);return}if("INPUT"===a)return;let b={...l.position};switch(l.direction){case"UP":b.y--;break;case"DOWN":b.y++;break;case"LEFT":b.x--;break;case"RIGHT":b.x++}let c=e.events.find(a=>a.position.x===b.x&&a.position.y===b.y);if(c&&"ACTION"===c.trigger&&"NPC"===c.type){if(c.data.questUpdate){let a=c.data.questUpdate;"START"===a?y(a=>({...a,hasTracker:!0})):"CLUE_STUDENT"===a&&x.hasTracker?y(a=>({...a,cluesFound:{...a.cluesFound,student:!0}})):"CLUE_CLERK"===a&&x.hasTracker?y(a=>({...a,cluesFound:{...a.cluesFound,clerk:!0}})):"CLUE_OLDMAN"===a&&x.hasTracker&&y(a=>({...a,cluesFound:{...a.cluesFound,oldMan:!0}}))}if(c.data.isPuzzle)return void(x.fogCleared?(u(["The Prime Regulator is running smoothly."]),d("DIALOG")):(u(c.data.dialog),d("INPUT"),A("")));if(c.data.checkGymLock){x.gymUnlocked?u(["The Gym is open! Good luck!"]):u(c.data.dialog),d("DIALOG");return}u(c.data.dialog),d("DIALOG")}},D=()=>{let a={...s.Ivieron},b=Object.keys(s),c={...s[b[Math.floor(Math.random()*b.length)]]};a.id=`p_${Date.now()}`,c.id=`e_${Date.now()}`,w({playerPokemon:a,enemyPokemon:c,turn:"PLAYER",message:`A wild ${c.name} appeared!`,phase:"INTRO"}),d("BATTLE"),setTimeout(()=>{w(b=>b?{...b,phase:"MENU",message:`What will ${a.name} do?`}:null)},2e3)},E=async a=>{if(!v)return;w(b=>b?{...b,message:"Loading question...",selectedAttack:a}:null);let b=await r();b?w(a=>a?{...a,phase:"QUESTION",message:"Solve the problem to attack!",currentQuestion:{text:b.text,answer:b.answer}}:null):w(a=>a?{...a,phase:"QUESTION",message:"Solve: 5 + 7 = ?",currentQuestion:{text:"5 + 7 = ?",answer:"12"}}:null)};return(0,c.useEffect)(()=>{let b=b=>{if("MAP"===a)switch(b.key){case"ArrowUp":B("UP");break;case"ArrowDown":B("DOWN");break;case"ArrowLeft":B("LEFT");break;case"ArrowRight":B("RIGHT");break;case"z":case"Enter":C()}};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[B,a,l]),(0,b.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center bg-slate-900 p-4",children:[(0,b.jsx)("div",{className:"relative w-[960px] h-[704px] overflow-hidden bg-black border-4 border-slate-700 rounded-lg shadow-2xl",children:"MAP"===a||"DIALOG"===a||"INPUT"===a?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g,{map:e,playerPos:l.position,playerDir:l.direction,isMoving:l.isMoving}),("DIALOG"===a||"INPUT"===a)&&t&&(0,b.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-white border-t-4 border-blue-800 p-4 z-10 min-h-[100px]",children:[(0,b.jsx)("p",{className:"text-lg font-mono mb-2 text-black",children:t[0]}),"DIALOG"===a&&(0,b.jsx)(h.Button,{size:"sm",onClick:()=>{t.length>1?u(t.slice(1)):(d("MAP"),u(null))},children:"Next"}),"INPUT"===a&&1===t.length&&(0,b.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,b.jsx)("input",{type:"text",value:z,onChange:a=>A(a.target.value),className:"border-2 border-black p-1 font-mono text-black",placeholder:"Enter number...",autoFocus:!0}),(0,b.jsx)(h.Button,{onClick:()=>{"39"===z?(y(a=>({...a,fogCleared:!0,gymUnlocked:!0})),u(["CORRECT VARIABLE DETECTED.","Logic Fog clearing...","Gym Unlocked!"])):u(["INCORRECT VARIABLE.","Calculation Error."]),d("DIALOG")},children:"Submit"}),(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>{d("MAP"),u(null)},children:"Cancel"})]}),"INPUT"===a&&t.length>1&&(0,b.jsx)(h.Button,{size:"sm",onClick:()=>u(t.slice(1)),children:"Next"})]})]}):"BATTLE"===a&&v?(0,b.jsx)(k,{battleState:v,onAttack:E,onRun:()=>{w(a=>a?{...a,message:"Got away safely!"}:null),setTimeout(()=>{d("MAP"),w(null)},1e3)},onAnswer:a=>{if(!v||!v.currentQuestion||!v.selectedAttack)return;let b=a.trim().toLowerCase()===v.currentQuestion.answer.trim().toLowerCase(),c=j[v.selectedAttack],e=v.playerPokemon,f=v.enemyPokemon;b?(w(a=>a?{...a,phase:"ATTACK",message:`Correct! ${e.name} used ${c.name.toUpperCase()}!`}:null),setTimeout(()=>{w(a=>{if(!a)return null;let b=10*c.amount,g=Math.floor((2*e.level/5+2)*b*e.stats.attack/f.stats.defense/50+2),h=Math.max(0,a.enemyPokemon.hp-g),i=Math.max(0,a.playerPokemon.energy-c.cost),k={...a.playerPokemon,energy:i};return 0===h?(setTimeout(()=>{d("MAP"),w(null)},2e3),{...a,playerPokemon:k,enemyPokemon:{...a.enemyPokemon,hp:0},phase:"RESULT",message:`Wild ${a.enemyPokemon.name} fainted!`}):(setTimeout(()=>{w(a=>{if(!a)return null;let b=a.enemyPokemon.abilities[Math.floor(Math.random()*a.enemyPokemon.abilities.length)],c=10*(j[b]||j.scratch).amount,d=Math.floor((2*a.enemyPokemon.level/5+2)*c*a.enemyPokemon.stats.attack/a.playerPokemon.stats.defense/50+2),e=Math.max(0,a.playerPokemon.hp-d);return{...a,playerPokemon:{...a.playerPokemon,hp:e},turn:"PLAYER",phase:"MENU",message:`Wild ${a.enemyPokemon.name} used ${b.toUpperCase()}! (Dm: ${d})`}})},2e3),{...a,playerPokemon:k,enemyPokemon:{...a.enemyPokemon,hp:h},turn:"ENEMY",phase:"ATTACK",message:`It dealt ${g} damage!`})})},1e3)):(w(a=>a?{...a,phase:"ATTACK",message:"Wrong! You missed!"}:null),setTimeout(()=>{w(a=>a?(setTimeout(()=>{w(a=>{if(!a)return null;let b=a.enemyPokemon.abilities[Math.floor(Math.random()*a.enemyPokemon.abilities.length)],c=10*(j[b]||j.scratch).amount,d=Math.floor((2*a.enemyPokemon.level/5+2)*c*a.enemyPokemon.stats.attack/a.playerPokemon.stats.defense/50+2),e=Math.max(0,a.playerPokemon.hp-d);return{...a,playerPokemon:{...a.playerPokemon,hp:e},turn:"PLAYER",phase:"MENU",message:`Wild ${a.enemyPokemon.name} used ${b.toUpperCase()}! (Dm: ${d})`}})},2e3),{...a,turn:"ENEMY",phase:"ATTACK",message:"Math error! execution failed."}):null)},1e3))}}):null}),(0,b.jsxs)("div",{className:"absolute bottom-8 right-8 grid grid-cols-3 gap-2 md:hidden",children:[(0,b.jsx)("div",{}),(0,b.jsx)(h.Button,{variant:"secondary",onClick:()=>B("UP"),children:(0,b.jsx)(m,{})}),(0,b.jsx)("div",{}),(0,b.jsx)(h.Button,{variant:"secondary",onClick:()=>B("LEFT"),children:(0,b.jsx)(o.ArrowLeft,{})}),(0,b.jsx)(h.Button,{variant:"destructive",onClick:C,className:"rounded-full w-12 h-12",children:"A"}),(0,b.jsx)(h.Button,{variant:"secondary",onClick:()=>B("RIGHT"),children:(0,b.jsx)(p.ArrowRight,{})}),(0,b.jsx)("div",{}),(0,b.jsx)(h.Button,{variant:"secondary",onClick:()=>B("DOWN"),children:(0,b.jsx)(n,{})}),(0,b.jsx)("div",{})]})]})}],39559)}];

//# sourceMappingURL=src_app_math-game_components_GameEngine_tsx_f4fafbc0._.js.map