module.exports=[99570,11011,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(70121),e=Symbol.for("react.lazy"),f=c[" use ".trim().toString()];function g(a){var b;return null!=a&&"object"==typeof a&&"$$typeof"in a&&a.$$typeof===e&&"_payload"in a&&"object"==typeof(b=a._payload)&&null!==b&&"then"in b}function h(a){var e;let h,i=(e=a,(h=c.forwardRef((a,b)=>{let{children:e,...h}=a;if(g(e)&&"function"==typeof f&&(e=f(e._payload)),c.isValidElement(e)){var i;let a,f,g=(i=e,(f=(a=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?i.ref:(f=(a=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?i.props.ref:i.props.ref||i.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(h,e.props);return e.type!==c.Fragment&&(j.ref=b?(0,d.composeRefs)(b,g):g),c.cloneElement(e,j)}return c.Children.count(e)>1?c.Children.only(null):null})).displayName=`${e}.SlotClone`,h),j=c.forwardRef((a,d)=>{let{children:e,...h}=a;g(e)&&"function"==typeof f&&(e=f(e._payload));let j=c.Children.toArray(e),l=j.find(k);if(l){let a=l.props.children,e=j.map(b=>b!==l?b:c.Children.count(a)>1?c.Children.only(null):c.isValidElement(a)?a.props.children:null);return(0,b.jsx)(i,{...h,ref:d,children:c.isValidElement(a)?c.cloneElement(a,void 0,e):null})}return(0,b.jsx)(i,{...h,ref:d,children:e})});return j.displayName=`${a}.Slot`,j}var i=h("Slot"),j=Symbol("radix.slottable");function k(a){return c.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===j}a.s(["Slot",()=>i,"createSlot",()=>h],11011);var l=a.i(187),m=a.i(68114);let n=(0,l.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=c.forwardRef(({className:a,variant:c,size:d,asChild:e=!1,...f},g)=>(0,b.jsx)(e?i:"button",{className:(0,m.cn)(n({variant:c,size:d,className:a})),ref:g,...f}));o.displayName="Button",a.s(["Button",()=>o,"buttonVariants",()=>n],99570)},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},67453,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],67453)},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},69097,a=>{"use strict";var b=a.i(87924),c=a.i(72131);class d{triggers=[];intervalId=null;checkIntervalMs=500;emulator=null;constructor(a=500){this.checkIntervalMs=a}setEmulator(a){this.emulator=a}addTrigger(a){this.triggers.push(a)}removeTrigger(a){this.triggers=this.triggers.filter(b=>b.address!==a)}startWatching(){this.intervalId?console.warn("Memory watcher already running"):this.emulator?(console.log("Starting GBA memory watcher..."),this.intervalId=setInterval(()=>{this.checkMemory()},this.checkIntervalMs)):console.error("No emulator instance set. Call setEmulator() first.")}stopWatching(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null,console.log("Memory watcher stopped"))}checkMemory(){if(this.emulator)try{let a=this.emulator.Module;if(!a||!a.HEAPU8)return;this.triggers.forEach(b=>{let c=a.HEAPU8[b.address];c===b.expectedValue&&(console.log(`Memory trigger detected at 0x${b.address.toString(16).toUpperCase()}: ${c}`),b.callback(c),this.resetTrigger(b.address))})}catch(a){console.error("Error reading emulator memory:",a)}}resetTrigger(a){try{this.emulator&&this.emulator.Module&&this.emulator.Module.HEAPU8&&(this.emulator.Module.HEAPU8[a]=0)}catch(a){console.error("Error resetting trigger:",a)}}writeMemory(a,b){try{this.emulator&&this.emulator.Module&&this.emulator.Module.HEAPU8&&(this.emulator.Module.HEAPU8[a]=b,console.log(`Wrote ${b} to 0x${a.toString(16).toUpperCase()}`))}catch(a){console.error("Error writing to memory:",a)}}destroy(){this.stopWatching(),this.triggers=[],this.emulator=null}}var e=a.i(99570),f=a.i(91119),g=a.i(92e3),h=a.i(67453),i=a.i(33508);let j=({question:a,isVisible:d,onAnswer:j,onClose:k})=>{let[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1);if(!d||!a)return null;let r=[{key:"A",text:a.option_a},{key:"B",text:a.option_b},{key:"C",text:a.option_c},{key:"D",text:a.option_d}];return(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80 backdrop-blur-sm z-50 p-4",children:(0,b.jsxs)(f.Card,{className:"w-full max-w-2xl shadow-2xl",children:[(0,b.jsx)(f.CardHeader,{className:"relative",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(f.CardTitle,{className:"text-2xl",children:"Numbers Town Challenge"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[a.subject," - ",a.unit]})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:k,className:"absolute top-4 right-4",disabled:n,children:(0,b.jsx)(i.X,{className:"h-4 w-4"})})]})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsx)("div",{className:"bg-slate-100 dark:bg-slate-800 p-4 rounded-lg",children:(0,b.jsx)("p",{className:"text-lg font-medium",children:a.question_text})}),(0,b.jsx)("div",{className:"space-y-2",children:r.map(c=>(0,b.jsx)("button",{onClick:()=>!n&&m(c.key),disabled:n,className:`w-full text-left p-4 rounded-lg border-2 transition-all ${l===c.key?"border-blue-500 bg-blue-50 dark:bg-blue-950":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"} ${n?"cursor-not-allowed opacity-60":"cursor-pointer"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`flex items-center justify-center w-8 h-8 rounded-full font-bold ${l===c.key?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:c.key}),(0,b.jsx)("span",{className:"flex-1",children:c.text}),n&&c.key===a.correct_option&&(0,b.jsx)(h.CheckCircle2,{className:"h-5 w-5 text-green-500"}),n&&l===c.key&&c.key!==a.correct_option&&(0,b.jsx)(i.X,{className:"h-5 w-5 text-red-500"})]})},c.key))}),n&&(0,b.jsx)("div",{className:`p-4 rounded-lg flex items-center gap-3 ${p?"bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800"}`,children:p?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.CheckCircle2,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-green-900 dark:text-green-100",children:"Correct! Well done! ðŸŽ‰"}),(0,b.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300",children:"The battle will begin shortly..."})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.AlertCircle,{className:"h-6 w-6 text-red-600 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-red-900 dark:text-red-100",children:"Not quite right!"}),(0,b.jsxs)("p",{className:"text-sm text-red-700 dark:text-red-300",children:["The correct answer was: ",a.correct_option]})]})]})})]}),!n&&(0,b.jsx)(f.CardFooter,{children:(0,b.jsx)(e.Button,{onClick:()=>{if(!l)return;let b=l===a.correct_option;q(b),o(!0),setTimeout(()=>{j(l,b),m(null),o(!1)},2e3)},disabled:!l,className:"w-full",size:"lg",children:"Submit Answer"})})]})})};var k=a.i(74167);let l=async(a="Math")=>{try{let{data:b,error:c}=await k.supabase.from("questions").select("id, question_text, options, correct_answer, subject, unit_id").eq("subject",a).limit(50);if(c)return console.error("Error fetching emulator question:",c),null;if(!b||0===b.length)return console.warn(`No questions found for subject: ${a}`),null;let d=Math.floor(Math.random()*b.length),e=b[d],f=e.options||[];if(f.length<4)return console.error("Question has less than 4 options:",e),null;let g=["A","B","C","D"][parseInt(e.correct_answer||"0",10)];return{id:e.id,question_text:e.question_text,option_a:f[0]||"",option_b:f[1]||"",option_c:f[2]||"",option_d:f[3]||"",correct_option:g,subject:e.subject||"Math",unit:e.unit_id||"Unknown"}}catch(a){return console.error("Exception fetching emulator question:",a),null}};a.s(["default",0,()=>{let a=(0,c.useRef)(null),e=(0,c.useRef)(!1),f=(0,c.useRef)(null),[g,h]=(0,c.useState)(null),[i,k]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(window.EJS_player="#game-container",window.EJS_core="gba",window.EJS_gameUrl="games/Pokemon - FireRed Version (USA, Europe) (Rev 1).gba",window.EJS_pathtodata="https://cdn.emulatorjs.org/stable/data/",window.EJS_startOnLoaded=!0,!e.current){let a=document.createElement("script");return a.src="https://cdn.emulatorjs.org/stable/data/loader.js",a.async=!0,a.onload=()=>{console.log("EmulatorJS loaded successfully from CDN"),m()},a.onerror=()=>{console.error("Failed to load EmulatorJS from CDN")},document.body.appendChild(a),e.current=!0,()=>{a.parentNode&&document.body.removeChild(a),f.current&&f.current.destroy()}}},[]);let m=()=>{let a=setInterval(()=>{if(window.EJS_emulator){clearInterval(a),console.log("Emulator ready, initializing memory watcher...");let b=new d(500);b.setEmulator(window.EJS_emulator),b.addTrigger({address:0x20370b0,expectedValue:1,callback:n}),b.startWatching(),f.current=b,console.log("Memory watcher initialized and started")}},1e3);setTimeout(()=>{clearInterval(a),window.EJS_emulator||console.warn("Emulator did not load within 30 seconds")},3e4)},n=async a=>{console.log("Question trigger detected!"),window.EJS_emulator&&(window.EJS_emulator.pause(),console.log("Emulator paused"));let b="Math";if(window.EJS_emulator&&window.EJS_emulator.Module&&window.EJS_emulator.Module.HEAPU8)try{let a=window.EJS_emulator.Module.HEAPU8[0x20370b4];b=(a=>{switch(a){case 1:default:return"Math";case 2:return"Analytical";case 3:return"English"}})(a),console.log(`Question type from memory: ${a} => ${b}`)}catch(a){console.error("Error reading question type from memory:",a)}let c=await l(b);c?(h(c),k(!0)):(console.error("Failed to fetch question, resuming game"),window.EJS_emulator&&window.EJS_emulator.resume())};return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-white mb-4",children:"Numbers Town - GBA Edition"}),(0,b.jsx)("p",{className:"text-gray-300 mb-2",children:"Pokemon FireRed with integrated math challenges from Supabase"}),(0,b.jsxs)("div",{className:"text-sm text-blue-400 bg-blue-900/20 border border-blue-600 rounded p-3 max-w-2xl mx-auto",children:[(0,b.jsx)("strong",{children:"ðŸ’¡ Interactive Learning:"})," NPCs will trigger math questions that pause the game!"]})]}),(0,b.jsxs)("div",{className:"relative bg-black rounded-lg shadow-2xl overflow-hidden mb-8",children:[(0,b.jsx)("div",{id:"game-container",ref:a,className:"w-full aspect-[3/2] min-h-[400px]"}),(0,b.jsx)(j,{question:g,isVisible:i,onAnswer:(a,b)=>{console.log(`Answer submitted: ${a}, Correct: ${b}`),f.current&&f.current.writeMemory(0x20370b2,+!!b),k(!1),h(null),window.EJS_emulator&&(window.EJS_emulator.resume(),console.log("Emulator resumed"))},onClose:()=>{f.current&&f.current.writeMemory(0x20370b2,0),k(!1),h(null),window.EJS_emulator&&window.EJS_emulator.resume()}})]}),(0,b.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 text-white",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"How It Works"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"ðŸŽ® Playing the Game"}),(0,b.jsx)("p",{className:"text-gray-300",children:"Play Pokemon FireRed normally using keyboard controls (Arrow keys, Z/X for A/B)."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"ðŸ“š Numbers Town NPCs"}),(0,b.jsx)("p",{className:"text-gray-300 mb-2",children:"When you interact with certain NPCs in the region, they will trigger a math question:"}),(0,b.jsxs)("ol",{className:"list-decimal list-inside text-gray-400 ml-4 space-y-1",children:[(0,b.jsx)("li",{children:"The game automatically pauses"}),(0,b.jsx)("li",{children:"A question overlay appears from your Supabase database"}),(0,b.jsx)("li",{children:"Answer correctly to continue the battle"}),(0,b.jsx)("li",{children:"Wrong answers send you back to try again"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"ðŸ”§ ROM Hacking Setup"}),(0,b.jsx)("p",{className:"text-gray-300 mb-2",children:"To enable this feature, you need to modify the ROM using XSE (eXtreme Script Editor):"}),(0,b.jsx)("div",{className:"bg-slate-900 p-4 rounded mt-2 font-mono text-sm text-gray-400 overflow-x-auto",children:(0,b.jsx)("pre",{children:`writebytetooffset 0x0203FFFF 0x01
waitstate
compare LASTRESULT 0x1
if 0x1 goto @battle`})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"âœ¨ Features"}),(0,b.jsxs)("ul",{className:"list-disc list-inside text-gray-300 space-y-1",children:[(0,b.jsx)("li",{children:"Real-time memory watching (0x0203FFFF)"}),(0,b.jsx)("li",{children:"Automatic game pause/resume"}),(0,b.jsx)("li",{children:"Questions fetched from your Supabase database"}),(0,b.jsx)("li",{children:"Support for Math, Analytical, and English questions"}),(0,b.jsx)("li",{children:"Clean UI overlay with instant feedback"})]})]})]})]})]})})}],69097)}];

//# sourceMappingURL=_652346c4._.js.map