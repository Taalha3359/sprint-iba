{"version":3,"sources":["../../../../src/app/math-game/components/MapView.tsx","../../../../src/app/math-game/components/BattleView.tsx","../../../../src/app/math-game/utils/questionManager.ts","../../../../src/app/math-game/components/GameEngine.tsx","../../../../src/app/math-game/data/maps.ts","../../../../src/app/math-game/data/monsters.ts","../../../../node_modules/lucide-react/src/icons/arrow-down.ts","../../../../node_modules/lucide-react/src/icons/arrow-up.ts","../../../../src/app/math-game/data/attacks.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { GameMap, Position, Direction, GameEvent } from '../types/index';\r\n\r\ninterface MapViewProps {\r\n    map: GameMap;\r\n    playerPos: Position;\r\n    playerDir: Direction;\r\n    isMoving: boolean;\r\n}\r\n\r\nconst TILE_SIZE = 32;\r\nconst VIEWPORT_WIDTH = 15; // Tiles\r\nconst VIEWPORT_HEIGHT = 11; // Tiles\r\nconst SCALE = 2; // Zoom level\r\n\r\nconst DEBUG_IMAGES = false; // Toggle to view image status\r\n\r\nconst MapView: React.FC<MapViewProps> = ({ map, playerPos, playerDir, isMoving }) => {\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const tilesetRef = useRef<HTMLImageElement>(new Image());\r\n    const playerSpriteRef = useRef<HTMLImageElement>(new Image());\r\n\r\n    // Cache for NPC sprites: { \"spritePath\": ImageObject }\r\n    const npcSpritesRef = useRef<{ [key: string]: HTMLImageElement }>({});\r\n\r\n    const [imagesLoaded, setImagesLoaded] = useState(false);\r\n\r\n    // const [debugStatus, setDebugStatus] = useState<string[]>([]);\r\n\r\n    useEffect(() => {\r\n        // const log = (msg: string) => setDebugStatus(prev => [...prev, msg]);\r\n\r\n        const checkLoaded = () => {\r\n            if (tilesetRef.current.complete && playerSpriteRef.current.complete) {\r\n                setImagesLoaded(true);\r\n            }\r\n        };\r\n\r\n        tilesetRef.current.onload = () => {\r\n            // log(\"Tileset Loaded\"); \r\n            checkLoaded();\r\n        };\r\n        // tilesetRef.current.onerror = (e) => {\r\n        //     log(`Tileset ERROR: ${tilesetRef.current.src}`);\r\n        //     console.error(\"Tileset failed\", e);\r\n        // };\r\n\r\n        playerSpriteRef.current.onload = () => {\r\n            // log(\"Player Loaded\");\r\n            checkLoaded();\r\n        };\r\n        // playerSpriteRef.current.onerror = (e) => {\r\n        //     log(`Player ERROR: ${playerSpriteRef.current.src}`);\r\n        //     console.error(\"Player failed\", e);\r\n        // };\r\n\r\n        tilesetRef.current.src = '/assets/math-rpg/tilesets/world.png';\r\n        playerSpriteRef.current.src = '/assets/math-rpg/characters/player.png';\r\n\r\n        // Preload NPC sprites\r\n        map.events.forEach((event: GameEvent) => {\r\n            if (event.type === 'NPC' && event.data?.sprite) {\r\n                const path = event.data.sprite;\r\n                if (!npcSpritesRef.current[path]) {\r\n                    const img = new Image();\r\n                    img.onload = () => { /* log(`NPC ${path} Loaded`); */ };\r\n                    img.onerror = () => console.error(`NPC Error: ${path}`);\r\n                    img.src = path;\r\n                    npcSpritesRef.current[path] = img;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (tilesetRef.current.complete && playerSpriteRef.current.complete) {\r\n            setImagesLoaded(true);\r\n        }\r\n    }, [map]); // Re-run if map changes (to load new NPCs)\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) return;\r\n\r\n        // Clear canvas\r\n        ctx.imageSmoothingEnabled = false;\r\n        ctx.fillStyle = '#000';\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n        // Calculate camera position\r\n        const camX = Math.max(0, Math.min(map.width - VIEWPORT_WIDTH, playerPos.x - Math.floor(VIEWPORT_WIDTH / 2)));\r\n        const camY = Math.max(0, Math.min(map.height - VIEWPORT_HEIGHT, playerPos.y - Math.floor(VIEWPORT_HEIGHT / 2)));\r\n\r\n        ctx.save();\r\n        ctx.scale(SCALE, SCALE);\r\n\r\n        // Draw Map\r\n        for (let y = 0; y < VIEWPORT_HEIGHT; y++) {\r\n            for (let x = 0; x < VIEWPORT_WIDTH; x++) {\r\n                const mapX = camX + x;\r\n                const mapY = camY + y;\r\n\r\n                if (mapX >= 0 && mapX < map.width && mapY >= 0 && mapY < map.height) {\r\n                    const tileId = map.tiles[mapY][mapX];\r\n\r\n                    // Always draw grass background first (Tile 0)\r\n                    drawTile(ctx, 0, x * TILE_SIZE, y * TILE_SIZE);\r\n\r\n                    if (tileId !== 0) {\r\n                        drawTile(ctx, tileId, x * TILE_SIZE, y * TILE_SIZE);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Draw NPCs\r\n        map.events.forEach((event: GameEvent) => {\r\n            if (event.type === 'NPC') {\r\n                const npcScreenX = (event.position.x - camX) * TILE_SIZE;\r\n                const npcScreenY = (event.position.y - camY) * TILE_SIZE;\r\n\r\n                if (npcScreenX >= -TILE_SIZE && npcScreenX < VIEWPORT_WIDTH * TILE_SIZE &&\r\n                    npcScreenY >= -TILE_SIZE && npcScreenY < VIEWPORT_HEIGHT * TILE_SIZE) {\r\n\r\n                    const spritePath = event.data?.sprite;\r\n                    const spriteImg = spritePath ? npcSpritesRef.current[spritePath] : null;\r\n\r\n                    if (spriteImg && spriteImg.complete && spriteImg.naturalWidth > 0) {\r\n                        drawCharacter(ctx, spriteImg, npcScreenX, npcScreenY, 'DOWN', false);\r\n                    } else {\r\n                        // Fallback to player sprite or red box\r\n                        drawCharacter(ctx, playerSpriteRef.current, npcScreenX, npcScreenY, 'DOWN', false);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Draw Player\r\n        const playerScreenX = (playerPos.x - camX) * TILE_SIZE;\r\n        const playerScreenY = (playerPos.y - camY) * TILE_SIZE;\r\n\r\n        drawCharacter(ctx, playerSpriteRef.current, playerScreenX, playerScreenY, playerDir, isMoving);\r\n\r\n        ctx.restore();\r\n\r\n    }, [map, playerPos, playerDir, isMoving, imagesLoaded]);\r\n\r\n    const drawTile = (ctx: CanvasRenderingContext2D, tileId: number, x: number, y: number) => {\r\n        // Standard RPG Maker XP Tileset: 8 tiles wide (256px), 32x32 per tile\r\n        const cols = 8;\r\n        const srcX = (tileId % cols) * TILE_SIZE;\r\n        const srcY = Math.floor(tileId / cols) * TILE_SIZE;\r\n\r\n        if (tilesetRef.current.complete && tilesetRef.current.naturalWidth > 0) {\r\n            ctx.drawImage(tilesetRef.current, srcX, srcY, TILE_SIZE, TILE_SIZE, x, y, TILE_SIZE, TILE_SIZE);\r\n        } else {\r\n            // Fallback colors only if image fails\r\n            ctx.fillStyle = '#4ade80';\r\n            ctx.fillRect(x, y, TILE_SIZE, TILE_SIZE);\r\n        }\r\n    };\r\n\r\n    const drawCharacter = (\r\n        ctx: CanvasRenderingContext2D,\r\n        img: HTMLImageElement,\r\n        x: number,\r\n        y: number,\r\n        dir: Direction,\r\n        moving: boolean\r\n    ) => {\r\n        const width = 32;\r\n        const height = 48;\r\n\r\n        let row = 0;\r\n        switch (dir) {\r\n            case 'DOWN': row = 0; break;\r\n            case 'LEFT': row = 1; break;\r\n            case 'RIGHT': row = 2; break;\r\n            case 'UP': row = 3; break;\r\n        }\r\n\r\n        const col = moving ? (Math.floor(Date.now() / 200) % 4) : 0;\r\n\r\n        if (img && img.complete && img.naturalWidth > 0) {\r\n            ctx.drawImage(\r\n                img,\r\n                col * width, row * height, width, height,\r\n                x, y - 16, width, height\r\n            );\r\n        } else {\r\n            ctx.fillStyle = 'red';\r\n            ctx.fillRect(x, y, TILE_SIZE, TILE_SIZE);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            <canvas\r\n                ref={canvasRef}\r\n                width={VIEWPORT_WIDTH * TILE_SIZE * SCALE}\r\n                height={VIEWPORT_HEIGHT * TILE_SIZE * SCALE}\r\n                className=\"border-4 border-slate-700 rounded-lg shadow-2xl bg-black\"\r\n            />\r\n            {/* Debug Removed */}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MapView;\r\n","\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { BattleState } from '../types/index';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { ATTACKS } from '../data/attacks'; // Import attacks\r\n\r\ninterface BattleViewProps {\r\n    battleState: BattleState;\r\n    onAttack: (moveName: string) => void;\r\n    onRun: () => void;\r\n    onAnswer: (answer: string) => void;\r\n}\r\n\r\nconst BattleView: React.FC<BattleViewProps> = ({ battleState, onAttack, onRun, onAnswer }) => {\r\n    const { playerPokemon, enemyPokemon, message, phase } = battleState;\r\n    const [answerInput, setAnswerInput] = useState(\"\");\r\n\r\n    const handleAnswerSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onAnswer(answerInput);\r\n        setAnswerInput(\"\");\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative w-full h-full bg-slate-800 flex items-center justify-center overflow-hidden\">\r\n            {/* Background */}\r\n            <div className=\"absolute inset-0 z-0\">\r\n                <img src=\"/assets/pokemon/Battlebacks/field_bg.png\" className=\"w-full h-full object-cover\" alt=\"Battle Background\" />\r\n            </div>\r\n\r\n            {/* Bases */}\r\n            <div className=\"absolute bottom-10 left-10 z-10\">\r\n                <img src=\"/assets/pokemon/Battlebacks/field_base0.png\" className=\"w-64\" alt=\"Player Base\" />\r\n            </div>\r\n            <div className=\"absolute top-20 right-10 z-10\">\r\n                <img src=\"/assets/pokemon/Battlebacks/field_base1.png\" className=\"w-64\" alt=\"Enemy Base\" />\r\n            </div>\r\n\r\n            {/* Pokemon */}\r\n            <div className=\"absolute bottom-20 left-20 z-20 animate-bounce-slow\">\r\n                <img src={playerPokemon.spriteBack} className=\"w-48 h-48 object-contain pixelated\" alt={playerPokemon.name} />\r\n            </div>\r\n            <div className=\"absolute top-24 right-24 z-20 animate-float\">\r\n                <img src={enemyPokemon.spriteFront} className=\"w-40 h-40 object-contain pixelated\" alt={enemyPokemon.name} />\r\n            </div>\r\n\r\n            {/* HUDs */}\r\n            <div className=\"absolute top-10 left-10 bg-white/90 p-4 rounded-lg shadow-lg border-2 border-slate-600 z-30 w-64\">\r\n                <h3 className=\"font-bold text-lg flex justify-between\">\r\n                    {enemyPokemon.name}\r\n                    <span className=\"text-sm text-slate-500\">Lv{enemyPokemon.level}</span>\r\n                </h3>\r\n                <Progress value={(enemyPokemon.hp / enemyPokemon.maxHp) * 100} className=\"h-2 mt-2 bg-slate-200 [&>div]:bg-red-500\" />\r\n            </div>\r\n\r\n            <div className=\"absolute bottom-32 right-10 bg-white/90 p-4 rounded-lg shadow-lg border-2 border-slate-600 z-30 w-64\">\r\n                <h3 className=\"font-bold text-lg flex justify-between\">\r\n                    {playerPokemon.name}\r\n                    <span className=\"text-sm text-slate-500\">Lv{playerPokemon.level}</span>\r\n                </h3>\r\n                <Progress value={(playerPokemon.hp / playerPokemon.maxHp) * 100} className=\"h-2 mt-2 bg-slate-200 [&>div]:bg-green-500\" />\r\n                <div className=\"flex justify-between items-center mt-1\">\r\n                    <p className=\"text-sm font-mono text-slate-600\">HP: {playerPokemon.hp.toFixed(0)}/{playerPokemon.maxHp}</p>\r\n                    <p className=\"text-xs font-mono text-blue-600\">NRG: {playerPokemon.energy.toFixed(0)}</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Message/Action Box */}\r\n            <div className=\"absolute bottom-0 left-0 right-0 h-32 bg-slate-900/90 border-t-4 border-slate-600 p-4 z-40 flex gap-4\">\r\n                <div className=\"flex-1 bg-slate-800 rounded p-4 border-2 border-slate-600 text-white text-xl font-mono\">\r\n                    {phase === 'QUESTION' && battleState.currentQuestion ? (\r\n                        <div>\r\n                            <p className=\"mb-2\">Solve: {battleState.currentQuestion.text}</p>\r\n                            <form onSubmit={handleAnswerSubmit} className=\"flex gap-2\">\r\n                                <input\r\n                                    autoFocus\r\n                                    type=\"text\"\r\n                                    value={answerInput}\r\n                                    onChange={(e) => setAnswerInput(e.target.value)}\r\n                                    className=\"bg-slate-700 border border-slate-500 rounded px-2 py-1 text-white w-32\"\r\n                                />\r\n                                <Button type=\"submit\" size=\"sm\">Submit</Button>\r\n                            </form>\r\n                        </div>\r\n                    ) : (\r\n                        <p>{message}</p>\r\n                    )}\r\n                </div>\r\n\r\n                {phase === 'MENU' && (\r\n                    <div className=\"w-80 grid grid-cols-2 gap-2 overflow-y-auto\">\r\n                        {playerPokemon.abilities.map((ability: string) => {\r\n                            const attackData = ATTACKS[ability];\r\n                            const cost = attackData ? attackData.cost : 0;\r\n                            const element = attackData ? attackData.element : 'normal';\r\n\r\n                            let colorClass = \"bg-slate-600 hover:bg-slate-700\";\r\n                            if (element === 'fire') colorClass = \"bg-red-600 hover:bg-red-700\";\r\n                            if (element === 'water') colorClass = \"bg-blue-600 hover:bg-blue-700\";\r\n                            if (element === 'plant') colorClass = \"bg-green-600 hover:bg-green-700\";\r\n\r\n                            return (\r\n                                <Button\r\n                                    key={ability}\r\n                                    onClick={() => onAttack(ability)}\r\n                                    className={`${colorClass} text-white font-bold text-xs uppercase flex justify-between`}\r\n                                    disabled={playerPokemon.energy < cost}\r\n                                >\r\n                                    <span>{ability}</span>\r\n                                    <span className=\"text-[10px] opacity-75\">{cost} E</span>\r\n                                </Button>\r\n                            );\r\n                        })}\r\n                        <Button onClick={onRun} className=\"bg-yellow-600 hover:bg-yellow-700 text-white font-bold text-xs\">RUN</Button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BattleView;\r\n","import { supabase } from \"@/integrations/supabase/client\";\r\n\r\nexport interface MathQuestion {\r\n    id: string;\r\n    text: string;\r\n    answer: string; // We might need to parse this or store it\r\n    options?: string[];\r\n}\r\n\r\nexport const getRandomMathQuestion = async (): Promise<MathQuestion | null> => {\r\n    try {\r\n        // Fetch a random math question\r\n        // Since we don't have a 'random()' function easily in Supabase without RPC,\r\n        // we'll fetch a batch and pick one.\r\n        const { data, error } = await supabase\r\n            .from('questions')\r\n            .select('id, question_text, correct_answer')\r\n            .eq('topic', 'Math')\r\n            .limit(20);\r\n\r\n        if (error) {\r\n            console.error('Error fetching questions:', error);\r\n            return null;\r\n        }\r\n\r\n        if (data && data.length > 0) {\r\n            const randomIndex = Math.floor(Math.random() * data.length);\r\n            const q = data[randomIndex];\r\n            return {\r\n                id: q.id,\r\n                text: q.question_text,\r\n                answer: q.correct_answer\r\n            };\r\n        }\r\n        return null;\r\n    } catch (err) {\r\n        console.error('Exception fetching questions:', err);\r\n        return null;\r\n    }\r\n};\r\n","\"use client\";\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { GameMap, PlayerState, Position, Direction, GameMode, BattleState, Pokemon, QuestState } from '../types/index';\r\nimport { INITIAL_MAP } from '../data/maps';\r\nimport MapView from './MapView';\r\nimport BattleView from './BattleView';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ArrowUp, ArrowDown, ArrowLeft, ArrowRight } from \"lucide-react\";\r\nimport { getRandomMathQuestion } from '../utils/questionManager';\r\nimport { MONSTERS } from '../data/monsters';\r\nimport { ATTACKS } from '../data/attacks';\r\n\r\nconst GameEngine = () => {\r\n    const [mode, setMode] = useState<GameMode>('MAP');\r\n    const [currentMap, setCurrentMap] = useState<GameMap>(INITIAL_MAP);\r\n    const [player, setPlayer] = useState<PlayerState>({\r\n        position: { x: 25, y: 35 }, // Start near south entrance\r\n        direction: 'UP',\r\n        isMoving: false\r\n    });\r\n    const [dialog, setDialog] = useState<string[] | null>(null);\r\n    const [battleState, setBattleState] = useState<BattleState | null>(null);\r\n\r\n    // Quest State\r\n    const [questState, setQuestState] = useState<QuestState>({\r\n        hasTracker: false,\r\n        cluesFound: { student: false, clerk: false, oldMan: false },\r\n        fogCleared: false,\r\n        gymUnlocked: false\r\n    });\r\n    const [inputValue, setInputValue] = useState(\"\");\r\n\r\n    // startBattle removed (duplicate)\r\n\r\n    const handleMove = useCallback((dir: Direction) => {\r\n        if (mode !== 'MAP') return;\r\n\r\n        setPlayer(prev => {\r\n            const newPos = { ...prev.position };\r\n            switch (dir) {\r\n                case 'UP': newPos.y--; break;\r\n                case 'DOWN': newPos.y++; break;\r\n                case 'LEFT': newPos.x--; break;\r\n                case 'RIGHT': newPos.x++; break;\r\n            }\r\n\r\n            // Collision Check\r\n            if (\r\n                newPos.x < 0 || newPos.x >= currentMap.width ||\r\n                newPos.y < 0 || newPos.y >= currentMap.height ||\r\n                currentMap.tiles[newPos.y][newPos.x] === 2 || // Wall\r\n                currentMap.tiles[newPos.y][newPos.x] === 3    // Water\r\n            ) {\r\n                return { ...prev, direction: dir }; // Just turn\r\n            }\r\n\r\n            // Event Check (NPCs) - Block movement\r\n            const event = currentMap.events.find(e => e.position.x === newPos.x && e.position.y === newPos.y);\r\n            if (event && event.type === 'NPC') {\r\n                return { ...prev, direction: dir };\r\n            }\r\n\r\n            // Check for Encounters (Grass = 0)\r\n            const isGrass = currentMap.tiles[newPos.y][newPos.x] === 0;\r\n            if (isGrass && Math.random() < 0.15) { // 15% chance\r\n                // Trigger Battle after move completes\r\n                setTimeout(() => startBattle(), 250);\r\n            }\r\n\r\n            return { ...prev, position: newPos, direction: dir, isMoving: true };\r\n        });\r\n\r\n        setTimeout(() => {\r\n            setPlayer(prev => ({ ...prev, isMoving: false }));\r\n        }, 200);\r\n\r\n    }, [mode, currentMap]);\r\n\r\n    const handleAction = () => {\r\n        if (mode === 'DIALOG') {\r\n            setMode('MAP');\r\n            setDialog(null);\r\n            return;\r\n        }\r\n        if (mode === 'INPUT') return;\r\n\r\n        // Check for events in front of player\r\n        const targetPos = { ...player.position };\r\n        switch (player.direction) {\r\n            case 'UP': targetPos.y--; break;\r\n            case 'DOWN': targetPos.y++; break;\r\n            case 'LEFT': targetPos.x--; break;\r\n            case 'RIGHT': targetPos.x++; break;\r\n        }\r\n\r\n        const event = currentMap.events.find(e => e.position.x === targetPos.x && e.position.y === targetPos.y);\r\n        if (event && event.trigger === 'ACTION') {\r\n            if (event.type === 'NPC') {\r\n                // Quest Logic\r\n                if (event.data.questUpdate) {\r\n                    const update = event.data.questUpdate;\r\n                    if (update === 'START') {\r\n                        setQuestState(prev => ({ ...prev, hasTracker: true }));\r\n                    } else if (update === 'CLUE_STUDENT' && questState.hasTracker) {\r\n                        setQuestState(prev => ({ ...prev, cluesFound: { ...prev.cluesFound, student: true } }));\r\n                    } else if (update === 'CLUE_CLERK' && questState.hasTracker) {\r\n                        setQuestState(prev => ({ ...prev, cluesFound: { ...prev.cluesFound, clerk: true } }));\r\n                    } else if (update === 'CLUE_OLDMAN' && questState.hasTracker) {\r\n                        setQuestState(prev => ({ ...prev, cluesFound: { ...prev.cluesFound, oldMan: true } }));\r\n                    }\r\n                }\r\n\r\n                // Puzzle Logic\r\n                if (event.data.isPuzzle) {\r\n                    if (questState.fogCleared) {\r\n                        setDialog([\"The Prime Regulator is running smoothly.\"]);\r\n                        setMode('DIALOG');\r\n                    } else {\r\n                        setDialog(event.data.dialog);\r\n                        setMode('INPUT');\r\n                        setInputValue(\"\");\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                // Gym Lock Logic\r\n                if (event.data.checkGymLock) {\r\n                    if (questState.gymUnlocked) {\r\n                        setDialog([\"The Gym is open! Good luck!\"]);\r\n                        setMode('DIALOG');\r\n                    } else {\r\n                        setDialog(event.data.dialog);\r\n                        setMode('DIALOG');\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                setDialog(event.data.dialog);\r\n                setMode('DIALOG');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handlePuzzleSubmit = () => {\r\n        if (inputValue === \"39\") {\r\n            setQuestState(prev => ({ ...prev, fogCleared: true, gymUnlocked: true }));\r\n            setDialog([\"CORRECT VARIABLE DETECTED.\", \"Logic Fog clearing...\", \"Gym Unlocked!\"]);\r\n            setMode('DIALOG');\r\n        } else {\r\n            setDialog([\"INCORRECT VARIABLE.\", \"Calculation Error.\"]);\r\n            setMode('DIALOG');\r\n        }\r\n    };\r\n\r\n    // Battle Handlers\r\n    const startBattle = () => {\r\n        // Randomly select a player monster for now (or could be fixed starter)\r\n        const playerMon = { ...MONSTERS['Ivieron'] };\r\n\r\n        // Randomly select an enemy\r\n        const monsterKeys = Object.keys(MONSTERS);\r\n        const randomKey = monsterKeys[Math.floor(Math.random() * monsterKeys.length)];\r\n        const enemyMon = { ...MONSTERS[randomKey] };\r\n\r\n        // Give unique IDs for this battle instance\r\n        playerMon.id = `p_${Date.now()}`;\r\n        enemyMon.id = `e_${Date.now()}`;\r\n\r\n        setBattleState({\r\n            playerPokemon: playerMon,\r\n            enemyPokemon: enemyMon,\r\n            turn: 'PLAYER',\r\n            message: `A wild ${enemyMon.name} appeared!`,\r\n            phase: 'INTRO'\r\n        });\r\n        setMode('BATTLE');\r\n\r\n        setTimeout(() => {\r\n            setBattleState(prev => prev ? { ...prev, phase: 'MENU', message: `What will ${playerMon.name} do?` } : null);\r\n        }, 2000);\r\n    };\r\n\r\n    const handleBattleAttack = async (moveName: string) => {\r\n        if (!battleState) return;\r\n\r\n        setBattleState(prev => prev ? { ...prev, message: 'Loading question...', selectedAttack: moveName } : null);\r\n\r\n        const question = await getRandomMathQuestion();\r\n        if (question) {\r\n            setBattleState(prev => prev ? {\r\n                ...prev,\r\n                phase: 'QUESTION',\r\n                message: 'Solve the problem to attack!',\r\n                currentQuestion: {\r\n                    text: question.text,\r\n                    answer: question.answer\r\n                }\r\n            } : null);\r\n        } else {\r\n            // Fallback\r\n            setBattleState(prev => prev ? {\r\n                ...prev,\r\n                phase: 'QUESTION',\r\n                message: 'Solve: 5 + 7 = ?',\r\n                currentQuestion: {\r\n                    text: '5 + 7 = ?',\r\n                    answer: '12'\r\n                }\r\n            } : null);\r\n        }\r\n    };\r\n\r\n    const handleBattleAnswer = (answer: string) => {\r\n        if (!battleState || !battleState.currentQuestion || !battleState.selectedAttack) return;\r\n\r\n        // Simple check (case insensitive, trimmed)\r\n        const isCorrect = answer.trim().toLowerCase() === battleState.currentQuestion.answer.trim().toLowerCase();\r\n        const attack = ATTACKS[battleState.selectedAttack];\r\n        const playerMon = battleState.playerPokemon;\r\n        const enemyMon = battleState.enemyPokemon;\r\n\r\n        if (isCorrect) {\r\n            setBattleState(prev => prev ? {\r\n                ...prev,\r\n                phase: 'ATTACK',\r\n                message: `Correct! ${playerMon.name} used ${attack.name.toUpperCase()}!`\r\n            } : null);\r\n\r\n            // Deal damage logic\r\n            setTimeout(() => {\r\n                setBattleState(currentState => {\r\n                    if (!currentState) return null;\r\n\r\n                    // Calculate Damage\r\n                    // Using simplified formula from Python: roughly (Attack / Defense) * Power * LevelFactor\r\n                    // Python: ((((2 * Lvl / 5 + 2) * Power * A / D) / 50) + 2)\r\n\r\n                    const power = attack.amount * 10; // Scaling abstract amount to ~power\r\n                    const damage = Math.floor(\r\n                        ((((2 * playerMon.level / 5 + 2) * power * playerMon.stats.attack / enemyMon.stats.defense) / 50) + 2)\r\n                    );\r\n\r\n                    const newEnemyHp = Math.max(0, currentState.enemyPokemon.hp - damage);\r\n\r\n                    // Consume Energy\r\n                    const newPlayerEnergy = Math.max(0, currentState.playerPokemon.energy - attack.cost);\r\n                    const updatedPlayer = { ...currentState.playerPokemon, energy: newPlayerEnergy };\r\n\r\n                    if (newEnemyHp === 0) {\r\n                        setTimeout(() => {\r\n                            setMode('MAP');\r\n                            setBattleState(null);\r\n                        }, 2000);\r\n                        return {\r\n                            ...currentState,\r\n                            playerPokemon: updatedPlayer,\r\n                            enemyPokemon: { ...currentState.enemyPokemon, hp: 0 },\r\n                            phase: 'RESULT',\r\n                            message: `Wild ${currentState.enemyPokemon.name} fainted!`\r\n                        };\r\n                    } else {\r\n                        // Enemy turn logic\r\n                        setTimeout(() => {\r\n                            setBattleState(bs => {\r\n                                if (!bs) return null;\r\n\r\n                                // Simple enemy AI: random move\r\n                                const enemyMoveName = bs.enemyPokemon.abilities[Math.floor(Math.random() * bs.enemyPokemon.abilities.length)];\r\n                                const enemyMove = ATTACKS[enemyMoveName] || ATTACKS['scratch'];\r\n\r\n                                const enemyPower = enemyMove.amount * 10;\r\n                                const enemyDamage = Math.floor(\r\n                                    ((((2 * bs.enemyPokemon.level / 5 + 2) * enemyPower * bs.enemyPokemon.stats.attack / bs.playerPokemon.stats.defense) / 50) + 2)\r\n                                );\r\n\r\n                                const newPlayerHp = Math.max(0, bs.playerPokemon.hp - enemyDamage);\r\n\r\n                                return {\r\n                                    ...bs,\r\n                                    playerPokemon: { ...bs.playerPokemon, hp: newPlayerHp },\r\n                                    turn: 'PLAYER',\r\n                                    phase: 'MENU',\r\n                                    message: `Wild ${bs.enemyPokemon.name} used ${enemyMoveName.toUpperCase()}! (Dm: ${enemyDamage})`\r\n                                };\r\n                            });\r\n                        }, 2000);\r\n\r\n                        return {\r\n                            ...currentState,\r\n                            playerPokemon: updatedPlayer,\r\n                            enemyPokemon: { ...currentState.enemyPokemon, hp: newEnemyHp },\r\n                            turn: 'ENEMY',\r\n                            phase: 'ATTACK',\r\n                            message: `It dealt ${damage} damage!`\r\n                        };\r\n                    }\r\n                });\r\n            }, 1000);\r\n        } else {\r\n            setBattleState(prev => prev ? { ...prev, phase: 'ATTACK', message: 'Wrong! You missed!' } : null);\r\n            setTimeout(() => {\r\n                setBattleState(currentState => {\r\n                    if (!currentState) return null;\r\n\r\n                    // Enemy turn logic (same as above)\r\n                    // ... Duplicated logic for brevity, ideally refactor enemy turn to function\r\n                    setTimeout(() => {\r\n                        setBattleState(bs => {\r\n                            if (!bs) return null;\r\n                            const enemyMoveName = bs.enemyPokemon.abilities[Math.floor(Math.random() * bs.enemyPokemon.abilities.length)];\r\n                            const enemyMove = ATTACKS[enemyMoveName] || ATTACKS['scratch'];\r\n                            const enemyPower = enemyMove.amount * 10;\r\n                            const enemyDamage = Math.floor(\r\n                                ((((2 * bs.enemyPokemon.level / 5 + 2) * enemyPower * bs.enemyPokemon.stats.attack / bs.playerPokemon.stats.defense) / 50) + 2)\r\n                            );\r\n                            const newPlayerHp = Math.max(0, bs.playerPokemon.hp - enemyDamage);\r\n                            return {\r\n                                ...bs,\r\n                                playerPokemon: { ...bs.playerPokemon, hp: newPlayerHp },\r\n                                turn: 'PLAYER',\r\n                                phase: 'MENU',\r\n                                message: `Wild ${bs.enemyPokemon.name} used ${enemyMoveName.toUpperCase()}! (Dm: ${enemyDamage})`\r\n                            };\r\n                        });\r\n                    }, 2000);\r\n\r\n                    return {\r\n                        ...currentState,\r\n                        turn: 'ENEMY',\r\n                        phase: 'ATTACK',\r\n                        message: `Math error! execution failed.`\r\n                    };\r\n                });\r\n            }, 1000);\r\n        }\r\n    };\r\n\r\n    const handleBattleRun = () => {\r\n        setBattleState(prev => prev ? { ...prev, message: 'Got away safely!' } : null);\r\n        setTimeout(() => {\r\n            setMode('MAP');\r\n            setBattleState(null);\r\n        }, 1000);\r\n    };\r\n\r\n    // Keyboard controls\r\n    useEffect(() => {\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            if (mode === 'MAP') {\r\n                switch (e.key) {\r\n                    case 'ArrowUp': handleMove('UP'); break;\r\n                    case 'ArrowDown': handleMove('DOWN'); break;\r\n                    case 'ArrowLeft': handleMove('LEFT'); break;\r\n                    case 'ArrowRight': handleMove('RIGHT'); break;\r\n                    case 'z': case 'Enter': handleAction(); break;\r\n                }\r\n            }\r\n        };\r\n\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => window.removeEventListener('keydown', handleKeyDown);\r\n    }, [handleMove, mode, player]);\r\n\r\n    return (\r\n        <div className=\"relative w-full h-full flex items-center justify-center bg-slate-900 p-4\">\r\n\r\n            <div className=\"relative w-[960px] h-[704px] overflow-hidden bg-black border-4 border-slate-700 rounded-lg shadow-2xl\">\r\n                {mode === 'MAP' || mode === 'DIALOG' || mode === 'INPUT' ? (\r\n                    <>\r\n                        <MapView\r\n                            map={currentMap}\r\n                            playerPos={player.position}\r\n                            playerDir={player.direction}\r\n                            isMoving={player.isMoving}\r\n                        />\r\n                        {/* Dialog Box */}\r\n                        {(mode === 'DIALOG' || mode === 'INPUT') && dialog && (\r\n                            <div className=\"absolute bottom-0 left-0 right-0 bg-white border-t-4 border-blue-800 p-4 z-10 min-h-[100px]\">\r\n                                <p className=\"text-lg font-mono mb-2 text-black\">{dialog[0]}</p>\r\n                                {mode === 'DIALOG' && (\r\n                                    <Button size=\"sm\" onClick={() => {\r\n                                        if (dialog.length > 1) {\r\n                                            setDialog(dialog.slice(1));\r\n                                        } else {\r\n                                            setMode('MAP');\r\n                                            setDialog(null);\r\n                                        }\r\n                                    }}>Next</Button>\r\n                                )}\r\n                                {mode === 'INPUT' && dialog.length === 1 && (\r\n                                    <div className=\"flex gap-2 mt-2\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={inputValue}\r\n                                            onChange={(e) => setInputValue(e.target.value)}\r\n                                            className=\"border-2 border-black p-1 font-mono text-black\"\r\n                                            placeholder=\"Enter number...\"\r\n                                            autoFocus\r\n                                        />\r\n                                        <Button onClick={handlePuzzleSubmit}>Submit</Button>\r\n                                        <Button variant=\"outline\" onClick={() => { setMode('MAP'); setDialog(null); }}>Cancel</Button>\r\n                                    </div>\r\n                                )}\r\n                                {mode === 'INPUT' && dialog.length > 1 && (\r\n                                    <Button size=\"sm\" onClick={() => setDialog(dialog.slice(1))}>Next</Button>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </>\r\n                ) : mode === 'BATTLE' && battleState ? (\r\n                    <BattleView\r\n                        battleState={battleState}\r\n                        onAttack={handleBattleAttack}\r\n                        onRun={handleBattleRun}\r\n                        onAnswer={handleBattleAnswer}\r\n                    />\r\n                ) : null}\r\n            </div>\r\n\r\n            {/* Mobile Controls */}\r\n            <div className=\"absolute bottom-8 right-8 grid grid-cols-3 gap-2 md:hidden\">\r\n                <div />\r\n                <Button variant=\"secondary\" onClick={() => handleMove('UP')}><ArrowUp /></Button>\r\n                <div />\r\n                <Button variant=\"secondary\" onClick={() => handleMove('LEFT')}><ArrowLeft /></Button>\r\n                <Button variant=\"destructive\" onClick={handleAction} className=\"rounded-full w-12 h-12\">A</Button>\r\n                <Button variant=\"secondary\" onClick={() => handleMove('RIGHT')}><ArrowRight /></Button>\r\n                <div />\r\n                <Button variant=\"secondary\" onClick={() => handleMove('DOWN')}><ArrowDown /></Button>\r\n                <div />\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GameEngine;\r\n","import { GameMap } from '../types/index';\r\n\r\n// Map Dimensions: 50x40\r\n// Map Dimensions: 50x40\r\nconst WIDTH = 50;\r\nconst HEIGHT = 40;\r\n\r\nconsole.log(\"Map Data Loaded: \" + Date.now());\r\n\r\n// Tile IDs (Derived from Debug Screenshot)\r\nconst GRASS = 0; // Default guess\r\nconst TREE = 160; // Dense tree block (Guess)\r\nconst PATH = 25; // Sand/Yellow path (Guess)\r\nconst WATER = 48; // Water (Guess)\r\nconst FENCE = 72;\r\nconst FLOWER = 16;\r\n\r\n// Building Tiles (REAL IDs from Screenshot)\r\n// Red Roof (PC)\r\nconst ROOF_PC_TL = 1584;\r\nconst ROOF_PC_TR = 1587;\r\nconst ROOF_PC_BL = 1634;\r\nconst ROOF_PC_BR = 1637;\r\n\r\n// Blue Roof (Mart)\r\nconst ROOF_MART_TL = 1628;\r\nconst ROOF_MART_TR = 1631;\r\n\r\n// Green Roof (House)\r\nconst ROOF_HOUSE_TL = 1976;\r\nconst ROOF_HOUSE_TR = 1979;\r\n\r\n// Walls\r\nconst WALL_WHITE = 1684;\r\nconst WALL_ORANGE = 1834;\r\n\r\nconst WINDOW = 1685; // White wall with window\r\nconst DOOR = 1779; // Purple door\r\n\r\n// Helper to create empty map\r\nconst createMap = (w: number, h: number, fill: number) => {\r\n    return Array(h).fill(null).map(() => Array(w).fill(fill));\r\n};\r\n\r\nconst tiles = createMap(WIDTH, HEIGHT, GRASS);\r\n\r\n// --- Draw Map Features ---\r\n\r\n// 1. Borders (Trees)\r\nfor (let y = 0; y < HEIGHT; y++) {\r\n    for (let x = 0; x < WIDTH; x++) {\r\n        if (x < 2 || x > WIDTH - 3 || y < 2 || y > HEIGHT - 3) {\r\n            tiles[y][x] = TREE;\r\n        }\r\n    }\r\n}\r\n\r\n// 2. Paths (Yellow/Sand)\r\n// Main Horizontal Road\r\nfor (let x = 2; x < WIDTH - 2; x++) {\r\n    tiles[15][x] = PATH;\r\n    tiles[16][x] = PATH;\r\n    tiles[25][x] = PATH; // Lower road\r\n    tiles[26][x] = PATH;\r\n}\r\n\r\n// Vertical Connections\r\nfor (let y = 2; y < HEIGHT - 2; y++) {\r\n    tiles[y][12] = PATH; // Left vertical\r\n    tiles[y][13] = PATH;\r\n\r\n    tiles[y][28] = PATH; // Right vertical\r\n    tiles[y][29] = PATH;\r\n}\r\n\r\n// 3. Buildings\r\n\r\n// Helper to place simple rectangular building\r\nconst placeBuilding = (tx: number, ty: number, w: number, h: number, roofStart: number, wallTile: number, doorX: number) => {\r\n    // Roof (Simple loop, assuming sequential IDs for now, but we might need more complex logic later)\r\n    // For now, just fill with the top-left roof tile to show *something* valid\r\n    for (let y = ty; y < ty + h - 2; y++) {\r\n        for (let x = tx; x < tx + w; x++) {\r\n            tiles[y][x] = roofStart + (x - tx) + (y - ty) * 8; // Attempt to map 8-width grid\r\n        }\r\n    }\r\n    // Walls\r\n    for (let y = ty + h - 2; y < ty + h; y++) {\r\n        for (let x = tx; x < tx + w; x++) {\r\n            tiles[y][x] = wallTile;\r\n        }\r\n    }\r\n    // Door\r\n    tiles[ty + h - 1][tx + doorX] = DOOR;\r\n    // Windows\r\n    if (w > 3) {\r\n        tiles[ty + h - 2][tx + 1] = WINDOW;\r\n        tiles[ty + h - 2][tx + w - 2] = WINDOW;\r\n    }\r\n};\r\n\r\n// Pokemon Center (Red Roof) - Top Left\r\nplaceBuilding(8, 6, 4, 4, ROOF_PC_TL, WALL_WHITE, 2);\r\n\r\n// Poke Mart (Blue Roof) - Next to PC\r\nplaceBuilding(14, 6, 4, 4, ROOF_MART_TL, WALL_WHITE, 2);\r\n\r\n// Gym (Large, Orange/Red) - Far Right\r\nplaceBuilding(35, 10, 6, 5, ROOF_PC_TL, WALL_ORANGE, 3);\r\n\r\n// House 1 (Green) - Top Right\r\nplaceBuilding(32, 6, 4, 4, ROOF_HOUSE_TL, WALL_WHITE, 1);\r\n\r\n// House 2 (Green) - Bottom Right\r\nplaceBuilding(32, 28, 4, 4, ROOF_HOUSE_TL, WALL_WHITE, 1);\r\n\r\n// House 3 (Green) - Bottom Left\r\nplaceBuilding(8, 28, 4, 4, ROOF_HOUSE_TL, WALL_WHITE, 1);\r\n\r\n// Counting House (Central)\r\nplaceBuilding(18, 18, 6, 5, ROOF_MART_TL, WALL_ORANGE, 3);\r\n\r\n// 4. Details\r\n// Fences\r\nfor (let y = 6; y < 12; y++) {\r\n    tiles[y][6] = FENCE; // Fence near PC\r\n}\r\n\r\n// Flowers\r\ntiles[18][10] = FLOWER;\r\ntiles[18][11] = FLOWER;\r\ntiles[19][10] = FLOWER;\r\ntiles[19][11] = FLOWER;\r\n\r\n\r\nexport const INITIAL_MAP: GameMap = {\r\n    id: 'numbers_town',\r\n    width: WIDTH,\r\n    height: HEIGHT,\r\n    tiles: tiles,\r\n    events: [\r\n        // --- Storyline NPCs ---\r\n\r\n        // Professor Logic (Near Counting House)\r\n        {\r\n            id: 'prof_logic',\r\n            position: { x: 21, y: 24 }, // In front of Counting House\r\n            type: 'NPC',\r\n            trigger: 'ACTION',\r\n            data: {\r\n                name: 'Professor Logic',\r\n                sprite: '/assets/math-rpg/characters/blond.png',\r\n                dialog: [\r\n                    \"Welcome to Numbers Town!\",\r\n                    \"We are in a state of Statistical Chaos.\",\r\n                    \"The Logic Fog has jammed the Prime Regulator.\",\r\n                    \"Here, take this Variable Tracker.\",\r\n                    \"Interview the residents to find the missing data points.\"\r\n                ],\r\n                questUpdate: 'START'\r\n            }\r\n        },\r\n        // Student (Bottom Left House)\r\n        {\r\n            id: 'student',\r\n            position: { x: 10, y: 33 },\r\n            type: 'NPC',\r\n            trigger: 'ACTION',\r\n            data: {\r\n                name: 'Student',\r\n                sprite: '/assets/math-rpg/characters/young_guy.png',\r\n                dialog: [\r\n                    \"I can't finish my homework!\",\r\n                    \"My records are incomplete...\",\r\n                    \"The average temperature for Wednesday, Thursday, and Friday was 40°C.\"\r\n                ],\r\n                questUpdate: 'CLUE_STUDENT'\r\n            }\r\n        },\r\n        // Clerk (Poke Mart)\r\n        {\r\n            id: 'clerk',\r\n            position: { x: 16, y: 11 },\r\n            type: 'NPC',\r\n            trigger: 'ACTION',\r\n            data: {\r\n                name: 'Clerk',\r\n                sprite: '/assets/math-rpg/characters/hat_girl.png',\r\n                dialog: [\r\n                    \"The warehouse readings are weird.\",\r\n                    \"The system says the average for Thursday, Friday, and Saturday was 41°C.\"\r\n                ],\r\n                questUpdate: 'CLUE_CLERK'\r\n            }\r\n        },\r\n        // Old Man (Near Gym)\r\n        {\r\n            id: 'old_man',\r\n            position: { x: 39, y: 17 },\r\n            type: 'NPC',\r\n            trigger: 'ACTION',\r\n            data: {\r\n                name: 'Old Man',\r\n                sprite: '/assets/math-rpg/characters/straw.png',\r\n                dialog: [\r\n                    \"It was so hot before the fog rolled in!\",\r\n                    \"I checked the thermometer myself...\",\r\n                    \"Saturday was a scorching 42°C!\"\r\n                ],\r\n                questUpdate: 'CLUE_OLDMAN'\r\n            }\r\n        },\r\n        // Fountain/Regulator (Central Plaza)\r\n        {\r\n            id: 'fountain',\r\n            position: { x: 21, y: 16 }, // Center of map\r\n            type: 'NPC',\r\n            trigger: 'ACTION',\r\n            data: {\r\n                name: 'Prime Regulator',\r\n                sprite: '', // No sprite for now, hidden collision or basic rock\r\n                dialog: [\r\n                    \"The Prime Regulator is humming...\",\r\n                    \"ENTER THE TRUE VARIABLE FOR WEDNESDAY.\"\r\n                ],\r\n                isPuzzle: true\r\n            }\r\n        },\r\n        // Gym Door\r\n        {\r\n            id: 'gym_door',\r\n            position: { x: 39, y: 15 },\r\n            type: 'NPC',\r\n            trigger: 'ACTION',\r\n            data: {\r\n                name: 'Gym Door',\r\n                sprite: '',\r\n                dialog: [\r\n                    \"The door is locked.\",\r\n                    \"A sign reads: 'Gym Closed due to Logic Fog.'\"\r\n                ],\r\n                checkGymLock: true\r\n            }\r\n        },\r\n\r\n        // --- Flavor NPCs ---\r\n        {\r\n            id: 'town_guide',\r\n            position: { x: 12, y: 18 },\r\n            type: 'NPC',\r\n            trigger: 'ACTION',\r\n            data: {\r\n                name: 'Town Guide',\r\n                sprite: '/assets/math-rpg/characters/young_girl.png',\r\n                dialog: [\"Numbers Town is known for its precision.\", \"Don't step on the grass if you don't want to calculate!\"]\r\n            }\r\n        },\r\n        {\r\n            id: 'kid_1',\r\n            position: { x: 32, y: 33 },\r\n            type: 'NPC',\r\n            trigger: 'ACTION',\r\n            data: {\r\n                name: 'Kid',\r\n                sprite: '/assets/math-rpg/characters/young_guy.png',\r\n                dialog: [\"My Pidgey has higher Speed stats than yours!\"]\r\n            }\r\n        }\r\n    ]\r\n};\r\n","import { Pokemon } from '../types';\r\n\r\nexport const MONSTERS: Record<string, Pokemon> = {\r\n    'Plumette': {\r\n        id: 'Plumette',\r\n        name: 'Plumette',\r\n        level: 5,\r\n        hp: 15,\r\n        maxHp: 15,\r\n        stats: { attack: 4, defense: 8, speed: 1, recovery: 1 },\r\n        element: 'plant',\r\n        energy: 17,\r\n        maxEnergy: 17,\r\n        abilities: ['scratch', 'spark'],\r\n        spriteFront: '/assets/math-rpg/monsters/Plumette.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Plumette.png'\r\n    },\r\n    'Ivieron': {\r\n        id: 'Ivieron',\r\n        name: 'Ivieron',\r\n        level: 32,\r\n        hp: 18,\r\n        maxHp: 18,\r\n        stats: { attack: 5, defense: 10, speed: 1.2, recovery: 1.2 },\r\n        element: 'plant',\r\n        energy: 20,\r\n        maxEnergy: 20,\r\n        abilities: ['scratch', 'spark'],\r\n        spriteFront: '/assets/math-rpg/monsters/Ivieron.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Ivieron.png'\r\n    },\r\n    'Pluma': {\r\n        id: 'Pluma',\r\n        name: 'Pluma',\r\n        level: 35,\r\n        hp: 23,\r\n        maxHp: 23,\r\n        stats: { attack: 6, defense: 12, speed: 1.8, recovery: 1.8 },\r\n        element: 'plant',\r\n        energy: 26,\r\n        maxEnergy: 26,\r\n        abilities: ['scratch', 'spark'],\r\n        spriteFront: '/assets/math-rpg/monsters/Pluma.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Pluma.png'\r\n    },\r\n    'Sparchu': {\r\n        id: 'Sparchu',\r\n        name: 'Sparchu',\r\n        level: 11,\r\n        hp: 15,\r\n        maxHp: 15,\r\n        stats: { attack: 3, defense: 8, speed: 1, recovery: 1.1 },\r\n        element: 'fire',\r\n        energy: 7,\r\n        maxEnergy: 7,\r\n        abilities: ['scratch', 'fire', 'battlecry', 'explosion'],\r\n        spriteFront: '/assets/math-rpg/monsters/Sparchu.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Sparchu.png'\r\n    },\r\n    'Cindrill': {\r\n        id: 'Cindrill',\r\n        name: 'Cindrill',\r\n        level: 16,\r\n        hp: 18,\r\n        maxHp: 18,\r\n        stats: { attack: 3.5, defense: 10, speed: 1.1, recovery: 1.2 },\r\n        element: 'fire',\r\n        energy: 10,\r\n        maxEnergy: 10,\r\n        abilities: ['scratch', 'fire', 'battlecry', 'explosion'],\r\n        spriteFront: '/assets/math-rpg/monsters/Cindrill.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Cindrill.png'\r\n    },\r\n    'Charmadillo': {\r\n        id: 'Charmadillo',\r\n        name: 'Charmadillo',\r\n        level: 33,\r\n        hp: 29,\r\n        maxHp: 29,\r\n        stats: { attack: 4, defense: 17, speed: 1.1, recovery: 1.35 },\r\n        element: 'fire',\r\n        energy: 12,\r\n        maxEnergy: 12,\r\n        abilities: ['scratch', 'fire', 'battlecry', 'explosion', 'annihilate'],\r\n        spriteFront: '/assets/math-rpg/monsters/Charmadillo.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Charmadillo.png'\r\n    },\r\n    'Finsta': {\r\n        id: 'Finsta',\r\n        name: 'Finsta',\r\n        level: 15,\r\n        hp: 13,\r\n        maxHp: 13,\r\n        stats: { attack: 2, defense: 8, speed: 1.8, recovery: 1.5 },\r\n        element: 'water',\r\n        energy: 17,\r\n        maxEnergy: 17,\r\n        abilities: ['scratch', 'spark', 'splash', 'ice', 'heal'],\r\n        spriteFront: '/assets/math-rpg/monsters/Finsta.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Finsta.png'\r\n    },\r\n    'Gulfin': {\r\n        id: 'Gulfin',\r\n        name: 'Gulfin',\r\n        level: 9,\r\n        hp: 18,\r\n        maxHp: 18,\r\n        stats: { attack: 3, defense: 10, speed: 2, recovery: 1.8 },\r\n        element: 'water',\r\n        energy: 20,\r\n        maxEnergy: 20,\r\n        abilities: ['scratch', 'spark', 'splash', 'ice', 'heal'],\r\n        spriteFront: '/assets/math-rpg/monsters/Gulfin.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Gulfin.png'\r\n    },\r\n    'Finiette': {\r\n        id: 'Finiette',\r\n        name: 'Finiette',\r\n        level: 30,\r\n        hp: 27,\r\n        maxHp: 27,\r\n        stats: { attack: 4, defense: 17, speed: 2.5, recovery: 2 },\r\n        element: 'water',\r\n        energy: 23,\r\n        maxEnergy: 23,\r\n        abilities: ['scratch', 'spark', 'splash', 'ice', 'heal'],\r\n        spriteFront: '/assets/math-rpg/monsters/Finiette.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Finiette.png'\r\n    },\r\n    'Atrox': {\r\n        id: 'Atrox',\r\n        name: 'Atrox',\r\n        level: 15,\r\n        hp: 18,\r\n        maxHp: 18,\r\n        stats: { attack: 3, defense: 10, speed: 1.9, recovery: 1.3 },\r\n        element: 'fire',\r\n        energy: 20,\r\n        maxEnergy: 20,\r\n        abilities: ['scratch', 'spark', 'fire'],\r\n        spriteFront: '/assets/math-rpg/monsters/Atrox.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Atrox.png'\r\n    },\r\n    'Pouch': {\r\n        id: 'Pouch',\r\n        name: 'Pouch',\r\n        level: 15,\r\n        hp: 23,\r\n        maxHp: 23,\r\n        stats: { attack: 4, defense: 12, speed: 1.5, recovery: 1 },\r\n        element: 'plant',\r\n        energy: 25,\r\n        maxEnergy: 25,\r\n        abilities: ['scratch', 'spark', 'heal'],\r\n        spriteFront: '/assets/math-rpg/monsters/Pouch.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Pouch.png'\r\n    },\r\n    'Draem': {\r\n        id: 'Draem',\r\n        name: 'Draem',\r\n        level: 13,\r\n        hp: 23,\r\n        maxHp: 23,\r\n        stats: { attack: 4, defense: 12, speed: 1.4, recovery: 1.2 },\r\n        element: 'plant',\r\n        energy: 25,\r\n        maxEnergy: 25,\r\n        abilities: ['scratch', 'heal', 'explosion', 'splash'],\r\n        spriteFront: '/assets/math-rpg/monsters/Draem.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Draem.png'\r\n    },\r\n    'Larvea': {\r\n        id: 'Larvea',\r\n        name: 'Larvea',\r\n        level: 12,\r\n        hp: 15,\r\n        maxHp: 15,\r\n        stats: { attack: 1, defense: 8, speed: 1, recovery: 1 },\r\n        element: 'plant',\r\n        energy: 17,\r\n        maxEnergy: 17,\r\n        abilities: ['scratch', 'spark'],\r\n        spriteFront: '/assets/math-rpg/monsters/Larvea.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Larvea.png'\r\n    },\r\n    'Cleaf': {\r\n        id: 'Cleaf',\r\n        name: 'Cleaf',\r\n        level: 15,\r\n        hp: 18,\r\n        maxHp: 18,\r\n        stats: { attack: 3, defense: 10, speed: 1.6, recovery: 1.7 },\r\n        element: 'plant',\r\n        energy: 20,\r\n        maxEnergy: 20,\r\n        abilities: ['scratch', 'heal'],\r\n        spriteFront: '/assets/math-rpg/monsters/Cleaf.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Cleaf.png'\r\n    },\r\n    'Jacana': {\r\n        id: 'Jacana',\r\n        name: 'Jacana',\r\n        level: 10,\r\n        hp: 12,\r\n        maxHp: 12,\r\n        stats: { attack: 3, defense: 10, speed: 2.6, recovery: 2.1 },\r\n        element: 'fire',\r\n        energy: 19,\r\n        maxEnergy: 19,\r\n        abilities: ['scratch', 'spark', 'burn', 'explosion', 'heal'],\r\n        spriteFront: '/assets/math-rpg/monsters/Jacana.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Jacana.png'\r\n    },\r\n    'Friolera': {\r\n        id: 'Friolera',\r\n        name: 'Friolera',\r\n        level: 25,\r\n        hp: 13,\r\n        maxHp: 13,\r\n        stats: { attack: 4, defense: 6, speed: 2, recovery: 1.3 },\r\n        element: 'water',\r\n        energy: 20,\r\n        maxEnergy: 20,\r\n        abilities: ['scratch', 'spark', 'splash', 'ice', 'heal'],\r\n        spriteFront: '/assets/math-rpg/monsters/Friolera.png',\r\n        spriteBack: '/assets/math-rpg/monsters/Friolera.png'\r\n    }\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KICA8cGF0aCBkPSJtMTkgMTItNyA3LTctNyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowDown = createLucideIcon('ArrowDown', [\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n  ['path', { d: 'm19 12-7 7-7-7', key: '1idqje' }],\n]);\n\nexport default ArrowDown;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNSAxMiA3LTcgNyA3IiAvPgogIDxwYXRoIGQ9Ik0xMiAxOVY1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/arrow-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowUp = createLucideIcon('ArrowUp', [\n  ['path', { d: 'm5 12 7-7 7 7', key: 'hav0vg' }],\n  ['path', { d: 'M12 19V5', key: 'x0mq9r' }],\n]);\n\nexport default ArrowUp;\n","export interface Attack {\r\n    name: string;\r\n    target: 'opponent' | 'player';\r\n    amount: number;\r\n    cost: number;\r\n    element: 'fire' | 'water' | 'plant' | 'normal';\r\n    animation: string;\r\n}\r\n\r\nexport const ATTACKS: Record<string, Attack> = {\r\n    'burn': { target: 'opponent', amount: 2, cost: 15, element: 'fire', animation: 'fire' },\r\n    'heal': { target: 'player', amount: -1.2, cost: 600, element: 'plant', animation: 'green' },\r\n    'battlecry': { target: 'player', amount: -1.4, cost: 20, element: 'normal', animation: 'green' },\r\n    'spark': { target: 'opponent', amount: 1.1, cost: 20, element: 'fire', animation: 'fire' },\r\n    'scratch': { target: 'opponent', amount: 1.2, cost: 20, element: 'normal', animation: 'scratch' },\r\n    'splash': { target: 'opponent', amount: 2, cost: 15, element: 'water', animation: 'splash' },\r\n    'fire': { target: 'opponent', amount: 2, cost: 15, element: 'fire', animation: 'fire' },\r\n    'explosion': { target: 'opponent', amount: 2, cost: 90, element: 'fire', animation: 'explosion' },\r\n    'annihilate': { target: 'opponent', amount: 3, cost: 30, element: 'fire', animation: 'explosion' },\r\n    'ice': { target: 'opponent', amount: 2, cost: 15, element: 'water', animation: 'ice' },\r\n};\r\n"],"names":[],"mappings":"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","ignoreList":[6,7]}